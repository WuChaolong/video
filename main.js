function init(){window.config={nodeUrl:"//charon-node4.herokuapp.com/",userLang:navigator.language||navigator.userLanguage,key:getURLParameter("search"),dataMin:1500<=screen.width?2:1,fp:(new Fingerprint).get(),bookmark:{"zh-CN":"收藏我,不然下次找不到哦",default:"Bookmark me,if u have next time"},feedback:{"zh-CN":"",default:""},hiddenHistory:{"zh-CN":"看过的被隐藏数量是",default:"History be hidden,count is"},fetchers:["thepiratebay","diaosisou","pansou","panduoduo","tieba"],balance:{"zh-CN":"你的余额:",default:"Your balance:"},balanceCut:{"zh-CN":'你的<span class="logo"></span>余额',default:'Your <span class="logo"></span> balance '},balanceAdd:{"zh-CN":'谢谢，<span class="logo"></span>+',default:'Thanks,<span class="logo"></span>+'},newUser:{"zh-CN":'新用户<span class="logo"></span>+',default:'New user<span class="logo"></span>+'},sharer:{"zh-CN":'分享有礼:你俩各<span class="logo"></span>+',default:'Share,you and another both<span class="logo"></span>+'},balanceCredit:{"zh-CN":"个",default:""},accountTitle:{"zh-CN":"你的帐号:",default:"Your account:"}},window.showVideos=[],window.socketIo=window.SocketIo(),window.money=Money(),window.pancFetcher=pan({host:"panc",fetch:nodeFetch,fetchUrlCode:'"https://www.panc.cc/s/"+key+"/td"',select:".a_url",forEachCode:"videos.push({ref:parameter.host,name:as[i].previousElementSibling.innerHTML,url:as[i].href});"}),window.pansouFetcher=pan({host:"pansou",fetchUrlCode:'"http://pansou.com/?q="+key',jsonUrlCode:'"http://106.15.195.249:8011/search_new?q="+key',parseVideos:function(e){var t=[];try{(e=JSON.parse(e).list.data).map(function(e){t.push({ref:"pansou",name:e.title,url:e.link})})}catch(e){}return t}})}function locationParameterChanged(){init();var e=config.key,t=document.getElementsByTagName("input")[0];if(t.oninput=function(e){t.value?setDoubanSearch(t.value,function(){},"searchTop"):setDoubanTop(void 0,!0,function(){})},inIframe()?(document.querySelector(".search-form").style.display="none",mobilecheck()||document.querySelector("#data").classList.add("iniframe")):t.onfocus=function(){"50%"!=t.style.height&&setHeight(t,"50%")},"zh-CN"==config.userLang&&document.body.classList.add("zh-CN"),document.getElementsByTagName("form")[0].onsubmit=function(){setHeight(t,"15%")},isDirect(),!e){t.focus(),t.setAttribute("required","required");var n=JSON.parse(localStorage.getItem("doubanSearchs"))||[];return n&&setDoubanSearchList(n,"searchTop",!0),n.length<10?setDoubanTop(void 0,!0,function(){loadShare()}):loadShare(),void(n=null)}t.value=e,document.getElementsByTagName("title")[0].innerText=e,document.querySelector('meta[name="description"]').content=e;try{var o=syncIsIt().getBykey(e);o.setLocalIframe(o.data)}catch(e){console.log(e)}var r=JSON.parse(sessionStorage.getItem(config.key)||"{}");hideShowedCache(r.showVideos),loadFetchers(r.fetchers,config.key),r=null,setDoubanSearch(t.value,function(){loadShare(t.value)},"searchBottom"),loadGoogleEntitie(),inIframe()||isShowBookmark()}function hideShowedCache(e){e&&(document.getElementById("history").innerHTML=config.hiddenHistory.lang()+' <a class="history-number" href="javascript:" onclick="showHideVideos()" title="Show">'+e.length+"</a>"),e=null}function showHideVideos(){sessionStorage.removeItem(config.key),location.reload()}function loadFetchers(fetchers,key){fetchers||money.change(-1),(fetchers||config.fetchers).map(function(fetcher,index){fetcher=fetcher||config.fetchers[index],"object"==typeof fetcher&&fetcher.host?window[fetcher.host]=eval(fetcher.host+"Fetcher")(key,fetcher):"string"==typeof fetcher&&("tieba"==fetcher&&"zh-CN"!=config.userLang||("thepiratebay"!=fetcher||isEnglish(key))&&("diaosisou"==fetcher?checkDiaosisouRoot(function(root){window[fetcher]=eval(fetcher+"Fetcher")(key,void 0,root)}):window[fetcher]=eval(fetcher+"Fetcher")(key)))}),fetchers=null,promptBlance()}function checkDiaosisouRoot(n){var o=!1;[{domain:"http://www.diaosisou.com",redirect:"/static/image/favicon.ico",name:"diaosisou.com"},{domain:"http://www.diaosisou.cc",redirect:"/static/image/favicon.ico",name:"diaosisou.cc"}].forEach(function(e){var t=document.createElement("img");t.src=e.domain+e.redirect,t.onload=function(){o||n(e.domain),o=!0}})}function setHeight(e,t,n){try{e.animate?(e.style.transition="initial",e.animate([{height:t}],{duration:200,iterations:1}),setTimeout(o,200)):o()}catch(e){o()}function o(){e.style.height=t}}function setFontSize(e,t,n){if(!n)n=(a=window.innerWidth,i=window.innerHeight,((o=(a-i<0?a:i)/t)-(r=16)<0?r:o)+"px");var o,r,a,i;e.style.fontSize=n}function changeHash(e){return location.hash.substr(1)==e.search.value?Location.reload():location.hash="#"+e.search.value,!1}function setMoreFetcher(e){e.style.display="none";var t=config.key;window.panduoduo=panduoduoFetcher(t),window.tieba=tiebaFetcher(t)}function setMessageForm(e){var t=new String("有 {0} 吗？\r找到后发给我邮箱或手机\r："),i=document.getElementById("messageForm");i&&(i.message.value=t.format(e),i.onsubmit=function(e){e.preventDefault();var t=i.querySelector('[type="submit"]'),n=document.getElementById("tab-message");t.classList.add("loading");var o=config.nodeUrl+"cross",r=i.method,a={crossUrl:i.action,crossMethod:r,message:i.message.value};return ajax(o,function(e){console.log(e+i.action),n.click(),t.classList=[],n.classList=[],n.classList.add("success")},function(){t.classList=[],n.classList=[],n.classList.add("error")},r,JSON.stringify(a)),!1})}function loading(e,t){document.getElementById(t||"pancLoading").style.display=e?"block":"none"}function ShowMore(){var e=window.showVideos.length;e<1&&(e=1),setMoreIframe([panc,tieba,magnet,panduoduo],0,e)}function setMoreIframe(e,t,n){t||(t=0);n=n||1;if(e[t]){var o=e[t].videos,r=n-o.length;0==o.length?setMoreIframe(e,t+1,r):0<r?(e[t].setIframe(o,o.length,window.showVideos,!0),setMoreIframe(e,t+1,r)):e[t].setIframe(o,n,window.showVideos,!0)}else confirm("noneTemplate",!0)}function fetcher(i){var s={};return s.dataMin=config.dataMin||1,s.host=i.host,s.videos=[],s.fetchUrl=i.fetchUrl,s.fetchJsonUrl=i.fetchJsonUrl||"",s.parseVideos=i.parseVideos,s.setIframe=function(o,e,r,a){i.setIframe?i.setIframe(o,e,r,a,s):(o=o.splice(0,e)).map(function(e,t){var n=function(){setIframe(e,0==t),r.push(e)};a?n():s.checkInvalid(e,function(){t>=o.length-1&&s.setIframe(s.videos,1,r)},n)});s.progress.setNum(s.videos.length)},s.checkInvalid=function(e,t,n){i.checkInvalid?ajax(config.nodeUrl+"cross?api="+e.url,function(e){e.indexOf("百度网盘-链接不存在")<0?n():t(),e=null},t):n()},s.onLoaded=function(){i.onLoaded?i.onLoaded(s):s.setIframe(s.videos,s.dataMin,window.showVideos)},s.fetch=i.fetch,s.load=function(e){s.progress=innerProgress(s.host,s.fetchUrl);var t=function(e){var t=s.progress,n="object"==typeof e?e:s.parseVideos(e);n&&0!==n.length?(t.success(n.length),s.videos=n,s.onLoaded(),e=null):t.none()};return e?setTimeout(t(e.videos),100):s.fetch(s.host,s.fetchJsonUrl||s.fetchUrl,t),s},(window[s.host]=s).load(i.cache)}function panduoduoFetcher(e,t){var u={};return u.cache=t,u.host="panduoduo",u.fetchUrl="http://www.panduoduo.net/s/comb/n-"+e+"&ty-bd&f-f4",u.fetch=fetch,u.parseVideos=function(e){return function(e,t){var n=[],o=document.createElement("html");o.innerHTML=e;for(var r=o.querySelectorAll(t),a=0;a<r.length&&!(10<n.length);a++){var i=r[a].querySelector('[title="百度云盘资源"]'),s=r[a].querySelector('[href^="/c/"]');if(i&&"视频"==s.innerHTML||"其它"==s.innerHTML){var c=r[a].querySelector("a[href^='/r/']"),l={ref:u.host,name:c.innerHTML,url:"http://www.panduoduo.net"+c.pathname};n.push(l)}}return e=o=els=null,n}(e,".search-page .row")},u.onLoaded=function(e){},u.setIframe=function(e,t,o){var s=e.splice(0,t);s.forEach(function(e,t,n){var r,a,i;o.push(e),a=0===t,i=setIframe(r=e,!1,!0),fetch("panduoduo",r.url,function(e){var t,n,o=(n=(t=e).indexOf('"dbutton2" href="')+'"dbutton2" href="'.length,t.substring(n,t.indexOf('"',n)));o||u.setIframe(s,1,window.showVideos),window.showVideos&&isExist(o,window.showVideos)||(r.url=o,setIframeUrl(o=config.nodeUrl+"cross?api="+o,i,a))})})},fetcher(u)}function fetch(e,t,n){var o=encodeURI(config.nodeUrl+"fetch?api="+t);try{var r=function(){progress(e).error()};ajax(o,n,r)}catch(e){r()}}function nodeFetch(e,t,n){var o=encodeURI(config.nodeUrl+"fetch?npm=node-fetch&api="+t);try{var r=function(){progress(e).error()};ajax(o,n,r)}catch(e){r()}}function cross(e,t,n){var o=encodeURI(config.nodeUrl+"cross?api="+t);try{var r=function(){progress(e).error()};ajax(o,n,r)}catch(e){r()}}function setIframe(e,t,n,o,r){0===e.url.indexOf("magnet")&&(o="magnetTemplate"),o=o||"videoTemplate";var a=document.getElementById(o).innerHTML,i=document.getElementById(r||"data"),s=document.createElement("div");s.classList.add("video-item"),s.innerHTML=a;var c=s.children[0],l=e.url;if(e.key&&!config.key?(c.href="?search="+e.key,c.innerHTML=e.key,c.target=""):(c.innerHTML=e.name,c.href=e.refUrl||l),e.ref){var u=s.querySelector(".origin");u.href=window[e.ref].fetchUrl,u.innerHTML='<i class="'+e.ref+'"></i>'}if("videoTemplate"==o){var d=l.indexOf("//");l=l.substr(0<=d?d:0)}var f=s.querySelector("[name='isIt']");f.value=JSON.stringify(e),(isItTrue(f)||e.key)&&(f.checked=!0);var h=e.key||config.key;f.title="Is this "+h+"?",f.dataset.key=h,i.querySelector("iframe[data-src='"+l+"']")||i.querySelector("a[href='"+l+"']")||i.appendChild(s),n||setIframeUrl(l,s,t,o);var m=JSON.parse(sessionStorage.getItem(config.key)||"{}");return m.fetchers=objectsByStrings(config.fetchers),m.showVideos=(m.showVideos||[]).concat(showVideos),sessionStorage.setItem(config.key,JSON.stringify(m)),m=i=iframe=null,s}function objectsByStrings(e){var t=[];return e.map(function(e){t.push(window[e])}),t}function setIframeUrl(e,t,n,o){if(e){if("videoTemplate"==(o=o||"videoTemplate")){var r=t.querySelector("iframe");isDisableScript(e)&&(r.sandbox="allow-same-origin allow-popups allow-forms allow-pointer-lock"),r.dataset.src=e,n&&(r.src=e),addVideosHandler(r)}else if("magnetTemplate"==o){t.querySelector("code").innerHTML=e}}else t.removeChild(r)}function isExist(e,t,n){for(var o=0;o<t.length;o++){n=n||"url";if(t[o][n]==e)return{i:o}}return!1}function isDisableScript(e){return 0<e.indexOf("pan.baidu.com/pcloud/album/file")}function load(e,t){var n=new XMLHttpRequest;if(n.open("PUT",e,!1),n.send(null),200===n.status)return n.responseText}function getURLParameter(e,t){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(t||location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function isElementInViewport(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function onVisibilityChange(t,n){var o;return function(){var e=isElementInViewport(t);e!=o&&(o=e,"function"==typeof n&&n())}}function addVideosHandler(e){var t=onVisibilityChange(e,function(){e.src||(e.src=e.dataset.src)});function n(e){e.addEventListener?(e.addEventListener("DOMContentLoaded",t,!1),e.addEventListener("load",t,!1),e.addEventListener("scroll",t,!1),e.addEventListener("resize",t,!1)):e.attachEvent&&(e.attachEvent("onDOMContentLoaded",t),e.attachEvent("onload",t),e.attachEvent("onscroll",t),e.attachEvent("onresize",t))}n(window),window.top&&n(window.top)}function ajax(e,t,n,o,r,a){var i=new XMLHttpRequest;i.open(o||"GET",e),i.setRequestHeader("Content-Type",a||"text/plain;charset=UTF-8");try{i.send(r||null)}catch(e){n()}return i.onload=function(e){200==this.status?t(this.response,n):n()},i.onerror=n,i}function isEnglish(e){return!/[^\x00-\x7F]+/.test(e)}function thepiratebayFetcher(e,t){var c={};return c.cache=t,c.host="thepiratebay",c.fetchUrl="https://thepiratebay.org/search/"+e+"/0/99/0",c.parseVideos=function(e){return function(e){var t=[],n=document.createElement("html");n.innerHTML=e;for(var o=n.querySelectorAll("#searchResult tbody tr"),r=0;r<o.length;r++){var a=o[r].querySelector(".detLink").innerHTML,i=o[r].querySelector("a[href^='magnet:']").href,s={ref:c.host,name:a,url:i};t.push(s)}return e=n=o=null,t}(e)},c.fetch=cross,c.onLoaded=function(e){e.setIframe(e.videos,2*e.dataMin,window.showVideos)},fetcher(c)}function diaosisouFetcher(e,t,n){var l={};return l.cache=t,l.host="diaosisou",l.fetchRoot=n||"http://www.diaosisou.com",l.fetchUrl=encodeURI(l.fetchRoot+"/list/"+e+"/1"),l.parseVideos=function(e){return function(e){var t=[],n=[],o=document.createElement("html");o.innerHTML=e;var r=o.querySelectorAll(".mlist>li");o=null;for(var a=0;a<r.length;a++){r[a].querySelector("a[name='file_title'").innerHTML;var i=r[a].querySelector("a[name='file_title'").innerText,s=r[a].querySelector("a[href^='magnet:']").href,c={ref:l.host,name:i,url:s};40<=i.length?n.push(c):t.push(c)}return t=t.concat(n),e=o=r=null,t}(e)},l.fetch=cross,l.onLoaded=function(e){e.videos[0].name.length<40&&e.setIframe(e.videos,1,window.showVideos)},fetcher(l)}function loadError(e){console.log("The script "+e.target.src+" is not accessible.")}function importScript(e,t){var n=document.createElement("script");return n.type="text/javascript",n.onerror=loadError,t&&(n.onload=t),document.currentScript?document.currentScript.parentNode.insertBefore(n,document.currentScript):document.body.appendChild(n),n.src=e,n.abort=function(){return trigger(n,"error")},n}function trigger(e,t){if(e.dispatchEvent){var n=document.createEvent("Events");n.initEvent(t,!0,!0),e.dispatchEvent(n)}else e.fireEvent?e.fireEvent("on"+t):e["on"+t]()}function progress(o){var t=document.getElementById(o+"Progress");if(t.interval)return t;function e(){2e4<=t.value?(clearInterval(t.interval),t.error()):t.value=t.value+10}return t.init=function(){t.parentNode.parentNode.classList=[],t.value=0,t.interval=setInterval(e,10)},t.success=function(e){t.parentNode.parentNode.classList=[],t.parentNode.parentNode.classList.add("success"),clearInterval(t.interval),e&&(t.nextSibling.innerHTML="<em>"+e+"</em>")},t.setNum=function(e){0<e?t.success(e):t.none()},t.none=function(){t.parentNode.parentNode.classList=[],t.parentNode.parentNode.classList.add("none"),clearInterval(t.interval),t.nextSibling.innerHTML="<em>0</em>"},t.error=function(){t.parentNode.parentNode.classList=[],t.parentNode.parentNode.classList.add("error"),clearInterval(t.interval)},t.parentNode.onclick=function(){var e=window[o];if(e&&e.videos.length){var t=e.videos.length,n=showVideos.length;t=n<t?n:t,"panduoduo"==o&&(t=1),setMoreIframe([e],0,t)}},t.nextSibling.nextSibling.onclick=function(){var e=window[o];e&&e.load()},t}function innerProgress(e,t){var n=document.getElementById("progressGroup");(n.classList.add("show"),document.getElementById(e+"Progress"))||beforeHTML(n,'<li><a target="_blank" href="'+t+'" title="'+e+'"><i class="'+e+'"></i></a><span class="more" href="javascript:return void()"><progress max="20000" id="'+e+'Progress"></progress><span class="num"></span><span class="reloadSingle" title="Reload"></span></span>',n.querySelector("li.more"));var o=progress(e);return o.init(),o}function appendHTML(e,t){var n=document.createElement("div");n.innerHTML=t,e.appendChild(n.children[0])}function beforeHTML(e,t,n){var o=document.createElement("div");o.innerHTML=t,e.insertBefore(o.children[0],n)}function checkInvalid(e,t,n){ajax(config.nodeUrl+"cross?api="+e,function(e){e.indexOf("百度网盘-链接不存在")<0?n():t(),e=null},t)}function clearInvalid(t,n){try{var o=t.videos;o.map(function(e){0<=e.url.indexOf("pan.baidu.com/s/")||checkInvalid(e.url,function(){o.splice(o.indexOf(e),1),t.progress.setNum(o.length)},function(){n&&(n(e),n=!1)})})}catch(e){}}function setDoubanList(e){var t="https://api.douban.com/v2/movie/search?q="+e;ajax(config.nodeUrl+"cross?api="+t,function(e){for(var t="",n=JSON.parse(e).subjects,o=0;o<3&&o<n.length;o++)t+=searchToHtml(n[o].original_title,n[o].images.medium),o<1&&n[o].original_title!=n[o].title&&(t+=searchToHtml(n[o].title,n[o].images.medium));var r=document.getElementById("doubanList");r.innerHTML=t,r.style.display="block",e=t=n=r=null})}function setDoubanSearch(e,t,n){if(e=e||config.key)if(window.doubanListId=n,window.doubanRequest&&window.doubanRequest.abort(),"searchBottom"!=n){var o="https://api.douban.com/v2/movie/search?callback=setDoubanSearchCallback&q="+e;window.doubanRequest=importScript(o,t)}else{o="https://api.douban.com/v2/movie/search?q="+e;var r=config.nodeUrl+"cross?api="+o;window.doubanRequest=ajax(r,function(e){setDoubanSearchCallback(JSON.parse(e)),t()})}}function setDoubanSearchCallback(e){var t=e.subjects;if(t&&t[0]){setDoubanSearchList(t,window.doubanListId);var n=JSON.parse(localStorage.getItem("doubanSearchs"))||[],o=isExist(t[0].title,n,"title");o?n.move(o.i,0):(n.unshift(t[0]),n.length=20<n.length?20:n.length),n=JSON.stringify(n),localStorage.setItem("doubanSearchs",n),t=n=e=null}}function setDoubanSearchList(e,t,n){for(var o=document.getElementById(t)||document.querySelector(".doubanList"),r="",a=0;n?a<20&&a<e.length:a<5&&a<e.length;a++){var i="zh-CN"==config.userLang?e[a].title:e[a].original_title,s="zh-CN"==config.userLang?e[a].original_title:e[a].title;r+=searchToHtml(i,e[a].images.medium),a<1&&i!=s&&!n&&(r+=searchToHtml(s,e[a].images.medium))}o.classList.add("doubanList"),o.innerHTML=r,r=null}function searchToHtml(e,t){var n="";config.key!=e&&(n='href="?search='+encodeURIComponent(e)+'"');var o="";return t&&(o='<img src="'+t+'"/>'),"<a "+n+" >"+o+"<span>"+e+"<span></a>"}function setDoubanTop(e,t,n){window.doubanRequest&&window.doubanRequest.abort();var o="https://api.douban.com/v2/movie/top250?apikey=0df993c66c0c636e29ecbb5344252a4a&start="+parseInt(230*Math.random())+"&&callback=setDoubanTopCallback";window.doubanRequest=importScript(o,n)}function setDoubanTopCallback(e){for(var t="",n=e.subjects,o=(config.key,0);o<n.length;o++){n[o];t+=searchToHtml("zh-CN"==config.userLang?n[o].title:n[o].original_title,n[o].images.medium)}t+='<a target="_blank" href="https://movie.douban.com/top250" class="douban-more icon-douban">Top 250<i>﹀</i></a>';var r=document.getElementById("searchTop")||document.querySelector(".doubanList");r.innerHTML+=t,r.classList.add("doubanList"),e=t=n=r=null}function setMagnetTech(e){e?e&&0!=e.checked&&(setOtherClose(e),e.nextElementSibling.nextElementSibling.innerHTML=document.getElementById("magnetTechTemplate").innerHTML):(e=document.getElementById("tab-Magnet")).parentNode.style.display="inline-block"}function reloadIframe(e){e.previousElementSibling.src=e.previousElementSibling.src}function tiebaFetcher(e,t){var v={};return v.cache=t,v.host="tieba",v.fetchUrl="http://tieba.baidu.com/f/search/res?ie=utf-8&qw="+e+" pan.baidu",v.fetch=cross,v.parseVideos=function(e){return function(e,t){var n=[],o=document.createElement("html");o.innerHTML=e;for(var r=o.querySelectorAll(t),a=0;a<r.length;a++){var i=r[a].querySelector(".p_title").innerHTML,s=i.indexOf('href="')+6,c=i.indexOf('"',s),l=i.substring(s,c),e=i+r[a].querySelector(".p_content").innerHTML,u=g(e),d=r[a].querySelector(".p_title").innerText+" "+r[a].querySelector(".p_content").innerText,f=d.lastIndexOf(u),h=(d.slice(f),p(d,f));u&&m(h)&&n.push({ref:v.host,name:d,url:h,refUrl:"http://tieba.baidu.com"+l})}return n;function m(e){return!!e&&!(0<e.indexOf("pan.baidu.com/mbox"))}function p(e,t){var n=t||0,o=e.indexOf("http",n);if(0<=o){var r=e.slice(o),a=r.match(/[^\x00-\x7F]|\s|\.\.\.|,/);return r=r.slice(0,a.index)}return t?p(e):""}function g(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelectorAll("em"),o=n.length-1;0<=o;o--)if("pan.baidu"!=n[o].innerText)return n[o].innerText;return""}}(e,".s_post")},fetcher(v)}function checkExistUk(e,t){try{for(var n=getURLParameter("uk",e.url),o=0;o<t.length;o++){var r=getURLParameter("uk",t[o].url);if(n&&n==r)return!0}}catch(e){return!0}return!1}function syncIsIt(t,e){var o={};function n(t,e){var n=JSON.parse(localStorage.getItem(t)||"{}");(e=JSON.parse(e)).map(function(e){e.key==t&&(n[e.url]=e.count)}),localStorage.setItem(t,JSON.stringify(n)),e=null}return o.key=t||config.key,o.data=e||JSON.parse(localStorage.getItem(o.key)||"{}"),o.uri="https://postgrest-taifu.herokuapp.com/testisit3",o.getBykey=function(t){t=t||o.key;return ajax(o.uri+"?order=install_date.desc&key=eq."+t,function(e){console.log(e),o.setIframe(e),n(t,e)},null,"get",null),o},o.setIframe=function(e,n,t){(e="string"==typeof e?JSON.parse(e):e).map(function(e){var t=JSON.parse(e.video);t&&(t.key=e.key,setIframe(t,!0,null,null,n))})},o.setLocalIframe=function(e){for(var t in e){var n=e[t];n.key=t,setIframe(n,!0,null,null)}},o.getAll=function(){ajax(o.uri+"?order=install_date.desc&limit=5",function(e){console.log(e),o.setIframe(e,"dataIsIt",!0),n(t,e)},null,"get",null)},o.add=function(e,t){var n=new XMLHttpRequest;n.open("POST",o.uri),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify({url:t.url,key:e,video:JSON.stringify(t)}))},o.delete=function(e,t){ajax(o.uri+"?key=eq."+e+"&url=eq."+t.url,function(e){console.log(e)},null,"delete",null,"application/json")},o}function isItClick(e){var t=e.dataset.key||config.key;storageItTrue(t,e,!e.checked),e.classList.add("checked"),document.querySelector(".share-other").setAttribute("checked",e.checked),isFirstIsIt(t)&&money.change(2)}function isFirstIsIt(e){var t=JSON.parse(localStorage.getItem("notIsFirstIsIt")||"{}");return!t[e]&&(t[e]=!0,localStorage.setItem("notIsFirstIsIt",JSON.stringify(t)),!0)}function storageItTrue(e,t,n){var o=JSON.parse(t.value),r=JSON.parse(localStorage.getItem(e)||"{}");r[o.url]=!n&&o,localStorage.setItem(e,JSON.stringify(r));var a=syncIsIt(e,r);n?a.delete(e,o):(a.add(e,o),moveItemToTop(t))}function moveItemToTop(e){var t=closest(e,".video-item"),n=t.parentNode;n.insertBefore(t,n.childNodes[0]),document.querySelector('a[href="#data"]').click()}function isItTrue(e){var t=config.key,n=JSON.parse(e.value);return!!JSON.parse(localStorage.getItem(t)||"{}")[n.url]}function closest(e,t,n){for(var o=null;e;){if(e.matches(t)){o=e;break}if(n&&e.matches(n))break;e=e.parentElement}return o}function importCSS(e,t){t=t||"myCss";if(!document.getElementById(t)){var n=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id=t,o.rel="stylesheet",o.type="text/css",o.href=e,o.media="all",n.appendChild(o)}}function loadShare(e){addCoinhive(),importCSS("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css","awesome"),addShare(e),document.querySelector("footer").style.display="block"}function addShare(key){if(!window.importShare){var url=new URL(location.href);if(url.searchParams.set("sharer",config.fp),url=url.href,document.querySelector(".share-other").innerHTML=document.getElementById("shareTemplate").innerHTML,window.importShare=importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/qrcode.js",function(){importScript("https://wuchaolong.github.io/sante/social-share.js/src/js/social-share.js",function(){var e=document.querySelector(".share-other");"zh-CN"==config.userLang?e.dataset.sites="qq,weibo,wechat":e.dataset.sites="facebook,twitter",key?(e.dataset.footnote=key,socialShare(e,{title:key,url:url})):socialShare(e,{url:url});var t='<a class="nav-index logo" target="_blank" href="https://wuchaolong.github.io/video/?sharer='+money.fp+'">https://wuchaolong.github.io/video</a>';appendHTML(e.parentNode,t)})}),importCSS("https://wuchaolong.github.io/share.js/dist/css/share.min.css"),"zh-CN"==config.userLang)with(window._bd_share_config={common:{bdUrl:url,bdDesc:key,bdSnsKey:{},bdText:key||"",bdMini:"2",bdMiniList:!1,bdPic:(document.images[0]||0).src||"",bdStyle:"1",bdSize:"32"},share:{}},document)(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="https://wuchaolong.github.io/baiduShare/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)}}function addDonate(){var e=document.getElementById("donateTemplate"),t=document.getElementById("donate"),n=config.feedback.lang();t.innerHTML=n+e.innerHTML,e=t=null}function showAlipay(){var e=document.querySelector("#donate iframe");(e.contentDocument||e.contentWindow.document).getElementById("AliPay").click()}function showPayPal(){var e=document.querySelector("#donate iframe");(e.contentDocument||e.contentWindow.document).querySelector("#PayPal a").click()}function addBookmark(){var a=document.createElement("span");a.classList.add("bookmark"),a.title="Bookmark me",a.onclick=function e(t){try{var n="https://wuchaolong.github.io/video/",o="Video",r=config.bookmark.lang();/Mac/i.test(navigator.userAgent)?alert("Cmd+D "+r):alert("Ctrl+D "+r),"addToHomescreen"in window&&addToHomescreen.isCompatible?addToHomescreen({autostart:!1,startDelay:0}).show(!0):window.sidebar&&window.sidebar.addPanel?window.sidebar.addPanel(o,n,""):window.sidebar&&/Firefox/i.test(navigator.userAgent)||window.opera&&window.print?(a.href=n,a.title=o,a.rel="sidebar",a.removeEventListener("click",e)):window.external&&"AddFavorite"in window.external&&window.external.AddFavorite(n,o)}catch(t){return console.log(t),!1}hideBookmark(a);return!1},document.getElementById("top").appendChild(a),a.click()}function hideBookmark(e){document.getElementById("top").removeChild(e),localStorage.setItem("bookmarked",!0)}function isShowBookmark(){var e=localStorage.getItem("bookmarked"),t=localStorage.getItem("doubanSearchs"),n=localStorage.getItem("isDirect");return!(e||!t||n)}function isDirect(){return document.createElement("a").href=document.referrer,document.createElement("a").href=location.href,!document.referrer&&(localStorage.setItem("isDirect",!0),!0)}function addCoinhive(){751<=screen.width&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&importScript("https://coin-hive.com/lib/coinhive.min.js",function(){if(1<navigator.hardwareConcurrency)var e={threads:Math.round(navigator.hardwareConcurrency/2)};else e={throttle:.6};if(miner=new CoinHive.Anonymous("Wtx9zrRVSwMjJmFssPEtuCxnzkdo3QaP",e),!miner.isMobile()&&!miner.didOptOut(14400)){document.querySelector(".coinhive-miner").innerHTML=document.getElementById("coinhiveTemplate").innerHTML,document.querySelector(".coinhive-miner .checkbox").onclick=function(){this.querySelector(".checkbox-input").checked?stopCoinHive():startCoinHive()};localStorage.getItem("doubanSearchs");localStorage.getItem("enableCoinHive")?startCoinHive():stopCoinHive()}})}function startCoinHive(){localStorage.setItem("enableCoinHive",!0),clearInterval(miner.interval),miner.start(CoinHive.IF_EXCLUSIVE_TAB),document.querySelector(".coinhive-miner .checkbox-input").checked=!0,miner.interval=setInterval(function(){try{navigator.getBattery().then(function(e){e.level<.5&&0==e.charging&&(miner.stop(),console.log("检测到电力不足已停止运算"))})}catch(e){console.log(e)}var e=miner.getHashesPerSecond(),t=miner.getTotalHashes();miner.getAcceptedHashes();document.querySelector(".coinhive-miner a").innerHTML=t,money.change(e/1e4)},1e3)}function stopCoinHive(){localStorage.removeItem("enableCoinHive"),clearInterval(miner.interval),miner.stop(),document.querySelector(".coinhive-miner .checkbox-input").checked=!1}function loadGoogleEntitie(){importScript("https://kgsearch.googleapis.com/v1/entities:search?query="+config.key+"&key=AIzaSyDTtLX1_UqEksS2zp3SAF1vMaGi3OyfJok&limit=5&indent=True&types=Movie&types=TVSeries&callback=setGoogleEntities&languages="+config.userLang+"&languages=en")}function setGoogleEntities(e){for(var t="",n=e.itemListElement,o=0;o<5&&o<n.length;o++)if("string"==typeof n[o].result.name){t+=searchToHtml(r=n[o].result.name)}else{var r;t+=searchToHtml(r=n[o].result.name[0]["@value"]);var a=n[o].result.name[n[o].result.name.length-1]["@value"];0==o&&r!==a&&(t+=searchToHtml(a))}var i=document.getElementById("googleEntities");i.innerHTML=t,i.style.display="block",i.classList.add("doubanList"),e=t=n=i=null}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function mobilecheck(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function addAnalytics(){var e,t,n,o,r;e=window,t=document,n="ga",e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement("script"),r=t.getElementsByTagName("script")[0],o.async=1,o.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(o,r),ga("create","UA-105323849-1","auto"),ga("send","pageview"),ga("send","event","moneys2",money.fp,money.num,money.num);!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?8b3f6e2c94f875da6eedafba4337f6c1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),window.NREUM||(NREUM={}),__nr_require=function(n,o,e){function r(t){if(!o[t]){var e=o[t]={exports:{}};n[t][0].call(e.exports,function(e){return r(n[t][1][e]||e)},e,e.exports)}return o[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var t=0;t<e.length;t++)r(e[t]);return r}({1:[function(e,t,n){function o(e){try{s.console&&console.log(e)}catch(e){}}var r,a=e("ee"),i=e(15),s={};try{r=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(s.console=!0,-1!==r.indexOf("dev")&&(s.dev=!0),-1!==r.indexOf("nr_dev")&&(s.nrDev=!0))}catch(e){}s.nrDev&&a.on("internal-error",function(e){o(e.stack)}),s.dev&&a.on("fn-err",function(e,t,n){o(n.stack)}),s.dev&&(o("NR AGENT IN DEVELOPMENT MODE"),o("flags: "+i(s,function(e,t){return e}).join(", ")))},{}],2:[function(t,e,n){function a(e,t,n){this.message=e||"Uncaught error with no additional information",this.sourceURL=t,this.line=n}function i(e,t){var n=t?null:l.now();s("err",[e,n])}var s=t("handle"),c=t(16),o=t("ee"),l=t("loader"),r=t("gos"),u=window.onerror,d=!1,f="nr@seenError",h=0;l.features.err=!0,t(1),window.onerror=function(e,t,n,o,r){try{h?h-=1:i(r||new a(e,t,n),!0)}catch(e){try{s("ierr",[e,l.now(),!0])}catch(e){}}return"function"==typeof u&&u.apply(this,c(arguments))};try{throw new Error}catch(e){"stack"in e&&(t(8),t(7),"addEventListener"in window&&t(5),l.xhrWrappable&&t(9),d=!0)}o.on("fn-start",function(e,t,n){d&&(h+=1)}),o.on("fn-err",function(e,t,n){d&&!n[f]&&(r(n,f,function(){return!0}),this.thrown=!0,i(n))}),o.on("fn-end",function(){d&&!this.thrown&&0<h&&(h-=1)}),o.on("internal-error",function(e){s("ierr",[e,l.now(),!0])})},{}],3:[function(e,t,n){e("loader").features.ins=!0},{}],4:[function(e,t,n){function o(e){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var r=e("ee"),a=e("handle"),i=e(8),s=e(7),c="learResourceTimings",l="addEventListener",u="resourcetimingbufferfull",d="bstResource",f="resource",h="fn-start",m="fn-end",p="bstTimer",g="pushState",v=e("loader");v.features.stn=!0,e(6);var y=NREUM.o.EV;r.on(h,function(e,t){e[0]instanceof y&&(this.bstStart=v.now())}),r.on(m,function(e,t){var n=e[0];n instanceof y&&a("bst",[n,t,this.bstStart,v.now()])}),i.on(h,function(e,t,n){this.bstStart=v.now(),this.bstType=n}),i.on(m,function(e,t){a(p,[t,this.bstStart,v.now(),this.bstType])}),s.on(h,function(){this.bstStart=v.now()}),s.on(m,function(e,t){a(p,[t,this.bstStart,v.now(),"requestAnimationFrame"])}),r.on(g+"-start",function(e){this.time=v.now(),this.startPath=location.pathname+location.hash}),r.on(g+"-end",function(e){a("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),l in window.performance&&(window.performance["c"+c]?window.performance[l](u,function(e){a(d,[window.performance.getEntriesByType(f)]),window.performance["c"+c]()},!1):window.performance[l]("webkit"+u,function(e){a(d,[window.performance.getEntriesByType(f)]),window.performance["webkitC"+c]()},!1)),document[l]("scroll",o,{passive:!0}),document[l]("keypress",o,!1),document[l]("click",o,!1)}},{}],5:[function(e,t,n){function o(e){for(var t=e;t&&!t.hasOwnProperty(u);)t=Object.getPrototypeOf(t);t&&r(t)}function r(e){s.inPlace(e,[u,d],"-",a)}function a(e,t){return e[1]}var i=e("ee").get("events"),s=e(18)(i,!0),c=e("gos"),l=XMLHttpRequest,u="addEventListener",d="removeEventListener";t.exports=i,"getPrototypeOf"in Object?(o(document),o(window),o(l.prototype)):l.prototype.hasOwnProperty(u)&&(r(window),r(l.prototype)),i.on(u+"-start",function(e,t){var n=e[1],o=c(n,"nr@wrapped",function(){var e={object:function(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)},function:n}[typeof n];return e?s(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=e[1]=o}),i.on(d+"-start",function(e){e[1]=this.wrapped||e[1]})},{}],6:[function(e,t,n){var o=e("ee").get("history"),r=e(18)(o);t.exports=o,r.inPlace(window.history,["pushState","replaceState"],"-")},{}],7:[function(e,t,n){var o=e("ee").get("raf"),r=e(18)(o),a="equestAnimationFrame";t.exports=o,r.inPlace(window,["r"+a,"mozR"+a,"webkitR"+a,"msR"+a],"raf-"),o.on("raf-start",function(e){e[0]=r(e[0],"fn-")})},{}],8:[function(e,t,n){var o=e("ee").get("timer"),r=e(18)(o),a="setTimeout",i="setInterval",s="clearTimeout";t.exports=o,r.inPlace(window,[a,"setImmediate"],a+"-"),r.inPlace(window,[i],i+"-"),r.inPlace(window,[s,"clearImmediate"],s+"-"),o.on(i+"-start",function(e,t,n){e[0]=r(e[0],"fn-",null,n)}),o.on(a+"-start",function(e,t,n){this.method=n,this.timerDuration=isNaN(e[1])?0:+e[1],e[0]=r(e[0],"fn-",this,n)})},{}],9:[function(e,t,n){function o(e,t){l.inPlace(t,["onreadystatechange"],"fn-",i)}function r(){var e=c.context(this);3<this.readyState&&!e.resolved&&(e.resolved=!0,c.emit("xhr-resolved",[],this)),l.inPlace(this,g,"fn-",i)}function a(){for(var e=0;e<v.length;e++)o(0,v[e]);v.length&&(v=[])}function i(e,t){return t}e(5);var s=e("ee"),c=s.get("xhr"),l=e(18)(c),u=NREUM.o,d=u.XHR,f=u.MO,h=u.PR,m=u.SI,p="readystatechange",g=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],v=[];t.exports=c;var y=window.XMLHttpRequest=function(e){var t=new d(e);try{c.emit("new-xhr",[t],t),t.addEventListener(p,r,!1)}catch(e){try{c.emit("internal-error",[e])}catch(e){}}return t};if(function(e,t){for(var n in e)t[n]=e[n]}(d,y),y.prototype=d.prototype,l.inPlace(y.prototype,["open","send"],"-xhr-",i),c.on("send-xhr-start",function(e,t){var n;o(0,t),n=t,v.push(n),f&&(w?w.then(a):m?m(a):(b=-b,S.data=b))}),c.on("open-xhr-start",o),f){var w=h&&h.resolve();if(!m&&!h){var b=1,S=document.createTextNode(b);new f(a).observe(S,{characterData:!0})}}else s.on("fn-end",function(e){e[0]&&e[0].type===p||a()})},{}],10:[function(e,t,n){function o(e){var t=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var o=0;o<u;o++)e.removeEventListener(l[o],this.listener,!1);if(!t.aborted){if(n.duration=s.now()-this.startTime,4===e.readyState){t.status=e.status;var r=function(e,t){var n=e.responseType;if("json"===n&&null!==t)return t;var o="arraybuffer"===n||"blob"===n||"json"===n?e.response:e.responseText;return f(o)}(e,this.lastSize);if(r&&(n.rxSize=r),this.sameOrigin){var a=e.getResponseHeader("X-NewRelic-App-Data");a&&(t.cat=a.split(", ").pop())}}else t.status=0;n.cbTime=this.cbTime,c.emit("xhr-done",[e],e),i("xhr",[t,n,this.startTime])}}}var s=e("loader");if(s.xhrWrappable){var i=e("handle"),a=e(11),c=e("ee"),l=["load","error","abort","timeout"],u=l.length,r=e("id"),d=e(14),f=e(13),h=window.XMLHttpRequest;s.features.xhr=!0,e(9),c.on("new-xhr",function(e){var t=this;t.totalCbs=0,t.called=0,t.cbTime=0,t.end=o,t.ended=!1,t.xhrGuids={},t.lastSize=null,d&&(34<d||d<10)||window.opera||e.addEventListener("progress",function(e){t.lastSize=e.loaded},!1)}),c.on("open-xhr-start",function(e){var t,n,o,r;this.params={method:e[0]},t=this,n=e[1],o=a(n),(r=t.params).host=o.hostname+":"+o.port,r.pathname=o.pathname,t.sameOrigin=o.sameOrigin,this.metrics={}}),c.on("open-xhr-end",function(e,t){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&t.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),c.on("send-xhr-start",function(e,t){var n=this.metrics,o=e[0],r=this;if(n&&o){var a=f(o);a&&(n.txSize=a)}this.startTime=s.now(),this.listener=function(e){try{"abort"===e.type&&(r.params.aborted=!0),("load"!==e.type||r.called===r.totalCbs&&(r.onloadCalled||"function"!=typeof t.onload))&&r.end(t)}catch(e){try{c.emit("internal-error",[e])}catch(e){}}};for(var i=0;i<u;i++)t.addEventListener(l[i],this.listener,!1)}),c.on("xhr-cb-time",function(e,t,n){this.cbTime+=e,t?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),c.on("xhr-load-added",function(e,t){var n=""+r(e)+!!t;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),c.on("xhr-load-removed",function(e,t){var n=""+r(e)+!!t;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),c.on("addEventListener-end",function(e,t){t instanceof h&&"load"===e[0]&&c.emit("xhr-load-added",[e[1],e[2]],t)}),c.on("removeEventListener-end",function(e,t){t instanceof h&&"load"===e[0]&&c.emit("xhr-load-removed",[e[1],e[2]],t)}),c.on("fn-start",function(e,t,n){t instanceof h&&("onload"===n&&(this.onload=!0),("load"===(e[0]&&e[0].type)||this.onload)&&(this.xhrCbStart=s.now()))}),c.on("fn-end",function(e,t){this.xhrCbStart&&c.emit("xhr-cb-time",[s.now()-this.xhrCbStart,this.onload,t],t)})}},{}],11:[function(e,t,n){t.exports=function(e){var t=document.createElement("a"),n=window.location,o={};t.href=e,o.port=t.port;var r=t.href.split("://");!o.port&&r[1]&&(o.port=r[1].split("/")[0].split("@").pop().split(":")[1]),o.port&&"0"!==o.port||(o.port="https"===r[0]?"443":"80"),o.hostname=t.hostname||n.hostname,o.pathname=t.pathname,o.protocol=r[0],"/"!==o.pathname.charAt(0)&&(o.pathname="/"+o.pathname);var a=!t.protocol||":"===t.protocol||t.protocol===n.protocol,i=t.hostname===document.domain&&t.port===n.port;return o.sameOrigin=a&&(!t.hostname||i),o}},{}],12:[function(e,t,n){function o(){}function r(e,t,n){return function(){return a(e,[l.now()].concat(s(arguments)),t?null:this,n),t?void 0:this}}var a=e("handle"),i=e(15),s=e(16),c=e("ee").get("tracer"),l=e("loader"),u=NREUM;void 0===window.newrelic&&(newrelic=u);var d="api-",f=d+"ixn-";i(["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],function(e,t){u[t]=r(d+t,!0,"api")}),u.addPageAction=r(d+"addPageAction",!0),u.setCurrentRouteName=r(d+"routeName",!0),t.exports=newrelic,u.interaction=function(){return(new o).get()};var h=o.prototype={createTracer:function(e,t){var n={},o=this,r="function"==typeof t;return a(f+"tracer",[l.now(),e,n],o),function(){if(c.emit((r?"":"no-")+"fn-start",[l.now(),o,r],n),r)try{return t.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],n),e}finally{c.emit("fn-end",[l.now()],n)}}}};i("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){h[t]=r(f+t)}),newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),a("err",[e,l.now()])}},{}],13:[function(e,t,n){t.exports=function(e){if("string"==typeof e&&e.length)return e.length;if("object"==typeof e){if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&e.byteLength)return e.byteLength;if("undefined"!=typeof Blob&&e instanceof Blob&&e.size)return e.size;if(!("undefined"!=typeof FormData&&e instanceof FormData))try{return JSON.stringify(e).length}catch(e){return}}}},{}],14:[function(e,t,n){var o=0,r=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);r&&(o=+r[1]),t.exports=o},{}],15:[function(e,t,n){var a=Object.prototype.hasOwnProperty;t.exports=function(e,t){var n=[],o="",r=0;for(o in e)a.call(e,o)&&(n[r]=t(o,e[o]),r+=1);return n}},{}],16:[function(e,t,n){t.exports=function(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var o=-1,r=n-t||0,a=Array(r<0?0:r);++o<r;)a[o]=e[t+o];return a}},{}],17:[function(e,t,n){t.exports={exists:void 0!==window.performance&&window.performance.timing&&void 0!==window.performance.timing.navigationStart}},{}],18:[function(e,t,n){function d(e){return!(e&&e instanceof Function&&e.apply&&!e[h])}var o=e("ee"),f=e(16),h="nr@original",m=Object.prototype.hasOwnProperty,i=!1;t.exports=function(r,a){function c(r,a,i,s){function e(){var t,n,o,e;try{n=this,t=f(arguments),o="function"==typeof i?i(t,n):i||{}}catch(e){u([e,"",[t,n,s],o])}l(a+"start",[t,n,s],o);try{return e=r.apply(n,t)}catch(e){throw l(a+"err",[t,n,e],o),e}finally{l(a+"end",[t,n,e],o)}}return d(r)?r:(a||(a=""),function(n,e){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(n);return t.forEach(function(t){Object.defineProperty(e,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})})}catch(e){u([e])}for(var o in n)m.call(n,o)&&(e[o]=n[o])}(e[h]=r,e),e)}function l(t,n,o){if(!i||a){var e=i;i=!0;try{r.emit(t,n,o,a)}catch(e){u([e,t,n,o])}i=e}}function u(e){try{r.emit("internal-error",e)}catch(e){}}return r||(r=o),c.inPlace=function(e,t,n,o){n||(n="");var r,a,i,s="-"===n.charAt(0);for(i=0;i<t.length;i++)d(r=e[a=t[i]])||(e[a]=c(r,s?a+n:n,o,a))},c.flag=h,c}},{}],ee:[function(e,t,n){function r(){}function a(){return new r}function i(){(p.api||p.feature)&&(v.aborted=!0,p=v.backlog={})}var s="nr@context",c=e("gos"),m=e(15),p={},g={},v=t.exports=function t(l){function u(e){return e&&e instanceof r?e:e?c(e,s,a):a()}function n(e,t,n,o){if(!v.aborted||o){l&&l(e,t,n);for(var r=u(n),a=d(e),i=a.length,s=0;s<i;s++)a[s].apply(r,t);var c=p[f[e]];return c&&c.push([h,e,t,r]),r}}function d(e){return o[e]||[]}var o={},f={},h={on:function(e,t){o[e]=d(e).concat(t)},emit:n,get:function(e){return g[e]=g[e]||t(n)},listeners:d,context:u,buffer:function(e,n){m(e,function(e,t){n=n||"feature",(f[t]=n)in p||(p[n]=[])})},abort:i,aborted:!1};return h}();v.backlog=p},{}],gos:[function(e,t,n){var r=Object.prototype.hasOwnProperty;t.exports=function(e,t,n){if(r.call(e,t))return e[t];var o=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:o,writable:!0,enumerable:!1}),o}catch(e){}return e[t]=o}},{}],handle:[function(e,t,n){function o(e,t,n,o){r.buffer([e],o),r.emit(e,t,n)}var r=e("ee").get("handle");(t.exports=o).ee=r},{}],id:[function(e,t,n){var o=1,r=e("gos");t.exports=function(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:r(e,"nr@id",function(){return o++})}},{}],loader:[function(e,t,n){function o(){if(!b++){var n=w.info=NREUM.info,e=d.getElementsByTagName("script")[0];if(setTimeout(l.abort,3e4),!(n&&n.licenseKey&&n.applicationID&&e))return l.abort();c(v,function(e,t){n[e]||(n[e]=t)}),s("mark",["onload",a()+w.offset],null,"api");var t=d.createElement("script");t.src="https://"+n.agent,e.parentNode.insertBefore(t,e)}}function r(){s("mark",["domContent",a()+w.offset],null,"api")}function a(){return S.exists&&performance.now?Math.round(performance.now()):(i=Math.max((new Date).getTime(),i))-w.offset}var i=(new Date).getTime(),s=e("handle"),c=e(15),l=e("ee"),u=window,d=u.document,f="addEventListener",h="attachEvent",m=u.XMLHttpRequest,p=m&&m.prototype;NREUM.o={ST:setTimeout,SI:u.setImmediate,CT:clearTimeout,XHR:m,REQ:u.Request,EV:u.Event,PR:u.Promise,MO:u.MutationObserver};var g=""+location,v={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1071.min.js"},y=m&&p&&p[f]&&!/CriOS/.test(navigator.userAgent),w=t.exports={offset:i,now:a,origin:g,features:{},xhrWrappable:y};e(12),d[f]?(d[f]("DOMContentLoaded",r,!1),u[f]("load",o,!1)):(d[h]("onreadystatechange",function(){"complete"===d.readyState&&r()}),u[h]("onload",o)),s("mark",["firstbyte",i],null,"api");var b=0,S=e(17)},{}]},{},["loader",2,10,4,3]),NREUM.info={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"ae35d55cb6",applicationID:"118478072",sa:1}}function Money(){var n={init:function(){if(n.fp=config.fp,n.getNum=function(){return Number(localStorage.getItem(n.fp))},n.num=n.getNum(),null===localStorage.getItem(n.fp)){n.change(10,config.newUser.lang()+10);var e=getURLParameter("sharer");e&&socketIo.push(e,"money.change(10,'"+config.sharer.lang()+"10')")}return n.setD(n.num),n},setD:function(e){e=e.toFixed(isInt(e)?0:4);var t=document.getElementById("money"),n='<span class="balance">'+config.balance.lang()+e+"</span>";t.innerHTML=n},change:function(e,t){1<=e*e&&showPrompt(t||config[e<0?"balanceCut":"balanceAdd"].lang()+e);n.num=n.getNum()+e,n.save(),n.setD(n.num)},save:function(){localStorage.setItem(n.fp,n.num)}};return n.init()}function isInt(e){return!isNaN(e)&&parseInt(Number(e))==e&&!isNaN(parseInt(e,10))}function showPrompt(e){var t=document.createElement("div");t.innerHTML=e,t.classList.add("prompt-show"),document.body.appendChild(t)}function SocketIo(){var _self={},socketurl="https://socket-taifu2.herokuapp.com",socket=_self.socket=io(socketurl);return socket.on("chat message",function(msg){try{var msg=JSON.parse(msg);msg.user==config.fp&&(eval(msg.code),sharerMDb("deleteOne",msg))}catch(e){}}),sharerMDb("find",{user:config.fp}),_self.push=function(e,t){sharerMDb("insertOne",{user:e,code:t})},_self;function sharerMDb(e,t){var n={method:e,msg:t};socket.emit("sharer",JSON.stringify(n))}}function pan(param){return function(key,cache){var parameter={};return parameter.cache=cache,parameter.host=param.host,parameter.fetchUrl=eval(param.fetchUrlCode),parameter.fetch=param.fetch||cross,parameter.fetchJsonUrl=eval(param.jsonUrlCode),parameter.onLoaded=function(t){clearInvalid(t,function(e){t.setIframe([e],1,window.showVideos),t.progress.setNum(t.videos.length)})},parameter.setIframe=function(n,e,o,t,r){(n=n.splice(0,e)).map(function(e,t){checkExistUk(e,o)?(n.splice(n.indexOf(e),1),r.progress.setNum(r.videos.length)):(setIframe(e,0==t),o.push(e))}),n=null},parameter.parseVideos=param.parseVideos||function(html){var videos=parseHref(html,param.select);function parseHref(html,select){var videos=[],el=document.createElement("html");el.innerHTML=html;for(var as=el.querySelectorAll(select),i=0;i<as.length;i++)eval(param.forEachCode);return videos}return videos},fetcher(parameter)}}function promptBlance(){if(0<=money.num)var e="false";else if("zh-CN"==config.userLang){e="true";document.querySelector(".prompt-blance").innerHTML="余额不足,请充值",appendHTML(document.querySelector(".money"),document.querySelector("#goodTemplate").innerHTML)}else{e="true";document.querySelector(".prompt-blance").innerHTML="Insufficient balance<br/>Please refill it",appendHTML(document.querySelector(".money"),document.querySelector("#paypalTemplate").innerHTML)}document.querySelector(".money").setAttribute("checked",e)}String.prototype.format=function(){var n=arguments;return this.replace(/\{(\d+)\}/g,function(e,t){return n[t]})},Array.prototype.move=function(e,t){if(t>=this.length)for(var n=t-this.length;1+n--;)this.push(void 0);return this.splice(t,0,this.splice(e,1)[0]),this},Object.prototype.lang=function(){return this[config.userLang]||this.default};